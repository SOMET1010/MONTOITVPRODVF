`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ju(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Q0=typeof WeakMap=="function"?WeakMap:Map;function Hm(t,e,r){r=pr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){xa||(xa=!0,Du=n),ju(t,e)},r}function Wm(t,e,r){r=pr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){ju(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){ju(t,e),typeof n!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function kh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Q0;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=lw.bind(null,t,e,r),e.then(t,t))}function bh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jh(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=pr(-1,1),e.tag=2,Qr(r,e,1))),r.lanes|=1),t)}var J0=_r.ReactCurrentOwner,dt=!1;function et(t,e,r,n){e.child=t===null?xm(e,null,r,n):Ci(e,t.child,r,n)}function Ph(t,e,r,n,i){r=r.render;var s=e.ref;return gi(e,i),n=Vc(t,e,r,n,s,i),r=qc(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(_e&&r&&Ac(e),e.flags|=1,et(t,e,n,i),e.child)}function Th(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!ed(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Km(t,e,s,n,i)):(t=Xo(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:As,r(o,n)&&t.ref===e.ref)return wr(t,e,i)}return e.flags|=1,t=Yr(s,n),t.ref=e.ref,t.return=e,e.child=t}function Km(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(As(s,n)&&t.ref===e.ref)if(dt=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,wr(t,e,i)}return Pu(t,e,r,n,i)}function Qm(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(di,gt),gt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(di,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ge(di,gt),gt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ge(di,gt),gt|=n;return et(t,e,i,r),e.child}function Jm(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Pu(t,e,r,n,i){var s=ft(r)?Cn:Qe.current;return s=Pi(e,s),gi(e,i),r=Vc(t,e,r,n,s,i),n=qc(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(_e&&n&&Ac(e),e.flags|=1,et(t,e,r,i),e.child)}function Ch(t,e,r,n,i){if(ft(r)){var s=!0;da(e)}else s=!1;if(gi(e,i),e.stateNode===null)Jo(t,e),qm(e,r,n),bu(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=ft(r)?Cn:Qe.current,u=Pi(e,u));var c=r.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Eh(e,o,n,u),Rr=!1;var f=e.memoizedState;o.state=f,ga(e,n,o,i),l=e.memoizedState,a!==n||f!==l||ht.current||Rr?(typeof c=="function"&&(ku(e,r,c,n),l=e.memoizedState),(a=Rr||Sh(e,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Em(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Lt(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Rt(l):(l=ft(r)?Cn:Qe.current,l=Pi(e,l));var v=r.getDerivedStateFromProps;(c=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Eh(e,o,n,l),Rr=!1,f=e.memoizedState,o.state=f,ga(e,n,o,i);var y=e.memoizedState;a!==h||f!==y||ht.current||Rr?(typeof v=="function"&&(ku(e,r,v,n),y=e.memoizedState),(u=Rr||Sh(e,r,u,n,f,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Tu(t,e,r,n,s,i)}function Tu(t,e,r,n,i,s){Jm(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&ph(e,r,!1),wr(t,e,s);n=e.stateNode,J0.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ci(e,t.child,null,s),e.child=Ci(e,null,a,s)):et(t,e,a,s),e.memoizedState=n.state,i&&ph(e,r,!0),e.child}function Gm(t){var e=t.stateNode;e.pendingContext?fh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fh(t,e.context,!1),zc(t,e.containerInfo)}function Rh(t,e,r,n,i){return Ti(),Nc(i),e.flags|=256,et(t,e,r,n),e.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function Ru(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ym(t,e,r){var n=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(xe,i&1),t===null)return Su(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Va(o,n,0,null),t=Tn(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ru(r),e.memoizedState=Cu,t):Kc(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return G0(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Yr(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yr(a,s):(s=Tn(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Ru(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Cu,n}return s=t.child,t=s.sibling,n=Yr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Kc(t,e){return e=Va({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Co(t,e,r,n){return n!==null&&Nc(n),Ci(e,t.child,null,r),t=Kc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G0(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Rl(Error(N(422))),Co(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Va({mode:"visible",children:n.children},i,0,null),s=Tn(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ci(e,t.child,null,o),e.child.memoizedState=Ru(o),e.memoizedState=Cu,s);if(!(e.mode&1))return Co(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(N(419)),n=Rl(s,n,void 0),Co(t,e,o,n)}if(a=(o&t.childLanes)!==0,dt||a){if(n=ze,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yr(t,i),qt(n,t,i,-1))}return Zc(),n=Rl(Error(N(421))),Co(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yt=Kr(i.nextSibling),wt=e,_e=!0,Bt=null,t!==null&&(bt[jt++]=hr,bt[jt++]=fr,bt[jt++]=Rn,hr=t.id,fr=t.overflow,Rn=e),e=Kc(e,n.children),e.flags|=4096,e)}function Ah(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Eu(t.return,e,r)}function Al(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Xm(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(et(t,e,n.children,r),n=xe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ah(t,r,e);else if(t.tag===19)Ah(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ge(xe,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&va(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Al(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&va(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Al(e,!0,r,null,s);break;case"together":Al(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),On|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,r=Yr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Yr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Y0(t,e,r){switch(e.tag){case 3:Gm(e),Ti();break;case 5:km(e);break;case 1:ft(e.type)&&da(e);break;case 4:zc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ge(pa,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ge(xe,xe.current&1),e.flags|=128,null):r&e.child.childLanes?Ym(t,e,r):(ge(xe,xe.current&1),t=wr(t,e,r),t!==null?t.sibling:null);ge(xe,xe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Xm(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(xe,xe.current),n)break;return null;case 22:case 23:return e.lanes=0,Qm(t,e,r)}return wr(t,e,r)}var Zm,Au,eg,tg;Zm=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Au=function(){};eg=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,wn(rr.current);var s=null;switch(r){case"input":i=Zl(t,i),n=Zl(t,n),s=[];break;case"select":i=Ee({},i,{value:void 0}),n=Ee({},n,{value:void 0}),s=[];break;case"textarea":i=ru(t,i),n=ru(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ua)}iu(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ks.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ks.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ve("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};tg=function(t,e,r,n){r!==n&&(e.flags|=4)};function Zi(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function X0(t,e,r){var n=e.pendingProps;switch(Oc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return ft(e.type)&&ca(),We(e),null;case 3:return n=e.stateNode,Ri(),ye(ht),ye(Qe),Fc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Po(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(zu(Bt),Bt=null))),Au(t,e),We(e),null;case 5:$c(e);var i=wn(Ds.current);if(r=e.type,t!==null&&e.stateNode!=null)eg(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(N(166));return We(e),null}if(t=wn(rr.current),Po(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[er]=e,n[Is]=s,t=(e.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(i=0;i<ls.length;i++)ve(ls[i],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":$d(n,s),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ve("invalid",n);break;case"textarea":Bd(n,s),ve("invalid",n)}iu(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&jo(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jo(n.textContent,a,t),i=["children",""+a]):ks.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ve("scroll",n)}switch(r){case"input":yo(n),Fd(n,s,!0);break;case"textarea":yo(n),Vd(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ua)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cp(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[er]=e,t[Is]=n,Zm(t,e,!1,!1),e.stateNode=t;e:{switch(o=su(r,n),r){case"dialog":ve("cancel",t),ve("close",t),i=n;break;case"iframe":case"object":case"embed":ve("load",t),i=n;break;case"video":case"audio":for(i=0;i<ls.length;i++)ve(ls[i],t);i=n;break;case"source":ve("error",t),i=n;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=n;break;case"details":ve("toggle",t),i=n;break;case"input":$d(t,n),i=Zl(t,n),ve("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ee({},n,{value:void 0}),ve("invalid",t);break;case"textarea":Bd(t,n),i=ru(t,n),ve("invalid",t);break;default:i=n}iu(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Op(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rp(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&bs(t,l):typeof l=="number"&&bs(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ks.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ve("scroll",t):l!=null&&vc(t,s,l,o))}switch(r){case"input":yo(t),Fd(t,n,!1);break;case"textarea":yo(t),Vd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Xr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?hi(t,!!n.multiple,s,!1):n.defaultValue!=null&&hi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ua)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)tg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(N(166));if(r=wn(Ds.current),wn(rr.current),Po(e)){if(n=e.stateNode,r=e.memoizedProps,n[er]=e,(s=n.nodeValue!==r)&&(t=wt,t!==null))switch(t.tag){case 3:jo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jo(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[er]=e,e.stateNode=n}return We(e),null;case 13:if(ye(xe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&yt!==null&&e.mode&1&&!(e.flags&128))wm(),Ti(),e.flags|=98560,s=!1;else if(s=Po(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(N(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));s[er]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),s=!1}else Bt!==null&&(zu(Bt),Bt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?De===0&&(De=3):Zc())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return Ri(),Au(t,e),t===null&&Os(e.stateNode.containerInfo),We(e),null;case 10:return Dc(e.type._context),We(e),null;case 17:return ft(e.type)&&ca(),We(e),null;case 19:if(ye(xe),s=e.memoizedState,s===null)return We(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Zi(s,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=va(t),o!==null){for(e.flags|=128,Zi(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ge(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ce()>Oi&&(e.flags|=128,n=!0,Zi(s,!1),e.lanes=4194304)}else{if(!n)if(t=va(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Zi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return We(e),null}else 2*Ce()-s.renderingStartTime>Oi&&r!==1073741824&&(e.flags|=128,n=!0,Zi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ce(),e.sibling=null,r=xe.current,ge(xe,n?r&1|2:r&1),e):(We(e),null);case 22:case 23:return Xc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?gt&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Z0(t,e){switch(Oc(e),e.tag){case 1:return ft(e.type)&&ca(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(),ye(ht),ye(Qe),Fc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $c(e),null;case 13:if(ye(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(xe),null;case 4:return Ri(),null;case 10:return Dc(e.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Ro=!1,Ke=!1,ew=typeof WeakSet=="function"?WeakSet:Set,U=null;function ci(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Te(t,e,n)}else r.current=null}function Ou(t,e,r){try{r()}catch(n){Te(t,e,n)}}var Oh=!1;function tw(t,e){if(mu=oa,t=om(),Rc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var v;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++c===n&&(l=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(gu={focusedElem:t,selectionRange:r},oa=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,k=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:Lt(e.type,w),k);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(E){Te(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return y=Oh,Oh=!1,y}function ys(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ou(e,r,s)}i=i.next}while(i!==n)}}function Fa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Nu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function rg(t){var e=t.alternate;e!==null&&(t.alternate=null,rg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[Is],delete e[wu],delete e[M0],delete e[U0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ng(t){return t.tag===5||t.tag===3||t.tag===4}function Nh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ng(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ua));else if(n!==4&&(t=t.child,t!==null))for(Iu(t,e,r),t=t.sibling;t!==null;)Iu(t,e,r),t=t.sibling}function Lu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Lu(t,e,r),t=t.sibling;t!==null;)Lu(t,e,r),t=t.sibling}var Fe=null,zt=!1;function kr(t,e,r){for(r=r.child;r!==null;)ig(t,e,r),r=r.sibling}function ig(t,e,r){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Na,r)}catch{}switch(r.tag){case 5:Ke||ci(r,e);case 6:var n=Fe,i=zt;Fe=null,kr(t,e,r),Fe=n,zt=i,Fe!==null&&(zt?(t=Fe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Fe.removeChild(r.stateNode));break;case 18:Fe!==null&&(zt?(t=Fe,r=r.stateNode,t.nodeType===8?kl(t.parentNode,r):t.nodeType===1&&kl(t,r),Cs(t)):kl(Fe,r.stateNode));break;case 4:n=Fe,i=zt,Fe=r.stateNode.containerInfo,zt=!0,kr(t,e,r),Fe=n,zt=i;break;case 0:case 11:case 14:case 15:if(!Ke&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ou(r,e,o),i=i.next}while(i!==n)}kr(t,e,r);break;case 1:if(!Ke&&(ci(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Te(r,e,a)}kr(t,e,r);break;case 21:kr(t,e,r);break;case 22:r.mode&1?(Ke=(n=Ke)||r.memoizedState!==null,kr(t,e,r),Ke=n):kr(t,e,r);break;default:kr(t,e,r)}}function Ih(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ew),e.forEach(function(n){var i=cw.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Nt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fe=a.stateNode,zt=!1;break e;case 3:Fe=a.stateNode.containerInfo,zt=!0;break e;case 4:Fe=a.stateNode.containerInfo,zt=!0;break e}a=a.return}if(Fe===null)throw Error(N(160));ig(s,o,i),Fe=null,zt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Te(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sg(e,t),e=e.sibling}function sg(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nt(e,t),Qt(t),n&4){try{ys(3,t,t.return),Fa(3,t)}catch(w){Te(t,t.return,w)}try{ys(5,t,t.return)}catch(w){Te(t,t.return,w)}}break;case 1:Nt(e,t),Qt(t),n&512&&r!==null&&ci(r,r.return);break;case 5:if(Nt(e,t),Qt(t),n&512&&r!==null&&ci(r,r.return),t.flags&32){var i=t.stateNode;try{bs(i,"")}catch(w){Te(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Pp(i,s),su(a,o);var u=su(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Op(i,h):c==="dangerouslySetInnerHTML"?Rp(i,h):c==="children"?bs(i,h):vc(i,c,h,u)}switch(a){case"input":eu(i,s);break;case"textarea":Tp(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?hi(i,!!s.multiple,v,!1):f!==!!s.multiple&&(s.defaultValue!=null?hi(i,!!s.multiple,s.defaultValue,!0):hi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Is]=s}catch(w){Te(t,t.return,w)}}break;case 6:if(Nt(e,t),Qt(t),n&4){if(t.stateNode===null)throw Error(N(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Te(t,t.return,w)}}break;case 3:if(Nt(e,t),Qt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Cs(e.containerInfo)}catch(w){Te(t,t.return,w)}break;case 4:Nt(e,t),Qt(t);break;case 13:Nt(e,t),Qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gc=Ce())),n&4&&Ih(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ke=(u=Ke)||c,Nt(e,t),Ke=u):Nt(e,t),Qt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(U=t,c=t.child;c!==null;){for(h=U=c;U!==null;){switch(f=U,v=f.child,f.tag){case 0:case 11:case 14:case 15:ys(4,f,f.return);break;case 1:ci(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Te(n,r,w)}}break;case 5:ci(f,f.return);break;case 22:if(f.memoizedState!==null){Dh(h);continue}}v!==null?(v.return=f,U=v):Dh(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ap("display",o))}catch(w){Te(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Te(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nt(e,t),Qt(t),n&4&&Ih(t);break;case 21:break;default:Nt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ng(r)){var n=r;break e}r=r.return}throw Error(N(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(bs(i,""),n.flags&=-33);var s=Nh(t);Lu(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Nh(t);Iu(t,a,o);break;default:throw Error(N(161))}}catch(l){Te(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rw(t,e,r){U=t,og(t)}function og(t,e,r){for(var n=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Ro;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ke;a=Ro;var u=Ke;if(Ro=o,(Ke=l)&&!u)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?Mh(i):l!==null?(l.return=o,U=l):Mh(i);for(;s!==null;)U=s,og(s),s=s.sibling;U=i,Ro=a,Ke=u}Lh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):Lh(t)}}function Lh(t){for(;U!==null;){var e=U;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ke||Fa(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ke)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Lt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wh(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}wh(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Cs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ke||e.flags&512&&Nu(e)}catch(f){Te(e,e.return,f)}}if(e===t){U=null;break}if(r=e.sibling,r!==null){r.return=e.return,U=r;break}U=e.return}}function Dh(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var r=e.sibling;if(r!==null){r.return=e.return,U=r;break}U=e.return}}function Mh(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Fa(4,e)}catch(l){Te(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Te(e,i,l)}}var s=e.return;try{Nu(e)}catch(l){Te(e,s,l)}break;case 5:var o=e.return;try{Nu(e)}catch(l){Te(e,o,l)}}}catch(l){Te(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var nw=Math.ceil,_a=_r.ReactCurrentDispatcher,Qc=_r.ReactCurrentOwner,Tt=_r.ReactCurrentBatchConfig,oe=0,ze=null,Oe=null,Be=0,gt=0,di=tn(0),De=0,$s=null,On=0,Ba=0,Jc=0,ws=null,ut=null,Gc=0,Oi=1/0,lr=null,xa=!1,Du=null,Jr=null,Ao=!1,Br=null,Sa=0,_s=0,Mu=null,Go=-1,Yo=0;function rt(){return oe&6?Ce():Go!==-1?Go:Go=Ce()}function Gr(t){return t.mode&1?oe&2&&Be!==0?Be&-Be:$0.transition!==null?(Yo===0&&(Yo=qp()),Yo):(t=ce,t!==0||(t=window.event,t=t===void 0?16:Yp(t.type)),t):1}function qt(t,e,r,n){if(50<_s)throw _s=0,Mu=null,Error(N(185));eo(t,r,n),(!(oe&2)||t!==ze)&&(t===ze&&(!(oe&2)&&(Ba|=r),De===4&&Or(t,Be)),pt(t,n),r===1&&oe===0&&!(e.mode&1)&&(Oi=Ce()+500,Ua&&rn()))}function pt(t,e){var r=t.callbackNode;$y(t,e);var n=sa(t,t===ze?Be:0);if(n===0)r!==null&&Wd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Wd(r),e===1)t.tag===0?z0(Uh.bind(null,t)):gm(Uh.bind(null,t)),L0(function(){!(oe&6)&&rn()}),r=null;else{switch(Hp(n)){case 1:r=Sc;break;case 4:r=Bp;break;case 16:r=ia;break;case 536870912:r=Vp;break;default:r=ia}r=pg(r,ag.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ag(t,e){if(Go=-1,Yo=0,oe&6)throw Error(N(327));var r=t.callbackNode;if(vi()&&t.callbackNode!==r)return null;var n=sa(t,t===ze?Be:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ea(t,n);else{e=n;var i=oe;oe|=2;var s=ug();(ze!==t||Be!==e)&&(lr=null,Oi=Ce()+500,Pn(t,e));do try{ow();break}catch(a){lg(t,a)}while(!0);Lc(),_a.current=s,oe=i,Oe!==null?e=0:(ze=null,Be=0,e=De)}if(e!==0){if(e===2&&(i=cu(t),i!==0&&(n=i,e=Uu(t,i))),e===1)throw r=$s,Pn(t,0),Or(t,n),pt(t,Ce()),r;if(e===6)Or(t,n);else{if(i=t.current.alternate,!(n&30)&&!iw(i)&&(e=Ea(t,n),e===2&&(s=cu(t),s!==0&&(n=s,e=Uu(t,s))),e===1))throw r=$s,Pn(t,0),Or(t,n),pt(t,Ce()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(N(345));case 2:hn(t,ut,lr);break;case 3:if(Or(t,n),(n&130023424)===n&&(e=Gc+500-Ce(),10<e)){if(sa(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yu(hn.bind(null,t,ut,lr),e);break}hn(t,ut,lr);break;case 4:if(Or(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Vt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nw(n/1960))-n,10<n){t.timeoutHandle=yu(hn.bind(null,t,ut,lr),n);break}hn(t,ut,lr);break;case 5:hn(t,ut,lr);break;default:throw Error(N(329))}}}return pt(t,Ce()),t.callbackNode===r?ag.bind(null,t):null}function Uu(t,e){var r=ws;return t.current.memoizedState.isDehydrated&&(Pn(t,e).flags|=256),t=Ea(t,e),t!==2&&(e=ut,ut=r,e!==null&&zu(e)),t}function zu(t){ut===null?ut=t:ut.push.apply(ut,t)}function iw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Jc,e&=~Ba,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vt(e),n=1<<r;t[r]=-1,e&=~n}}function Uh(t){if(oe&6)throw Error(N(327));vi();var e=sa(t,0);if(!(e&1))return pt(t,Ce()),null;var r=Ea(t,e);if(t.tag!==0&&r===2){var n=cu(t);n!==0&&(e=n,r=Uu(t,n))}if(r===1)throw r=$s,Pn(t,0),Or(t,e),pt(t,Ce()),r;if(r===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hn(t,ut,lr),pt(t,Ce()),null}function Yc(t,e){var r=oe;oe|=1;try{return t(e)}finally{oe=r,oe===0&&(Oi=Ce()+500,Ua&&rn())}}function Nn(t){Br!==null&&Br.tag===0&&!(oe&6)&&vi();var e=oe;oe|=1;var r=Tt.transition,n=ce;try{if(Tt.transition=null,ce=1,t)return t()}finally{ce=n,Tt.transition=r,oe=e,!(oe&6)&&rn()}}function Xc(){gt=di.current,ye(di)}function Pn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,I0(r)),Oe!==null)for(r=Oe.return;r!==null;){var n=r;switch(Oc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ca();break;case 3:Ri(),ye(ht),ye(Qe),Fc();break;case 5:$c(n);break;case 4:Ri();break;case 13:ye(xe);break;case 19:ye(xe);break;case 10:Dc(n.type._context);break;case 22:case 23:Xc()}r=r.return}if(ze=t,Oe=t=Yr(t.current,null),Be=gt=e,De=0,$s=null,Jc=Ba=On=0,ut=ws=null,yn!==null){for(e=0;e<yn.length;e++)if(r=yn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}yn=null}return t}function lg(t,e){do{var r=Oe;try{if(Lc(),Ko.current=wa,ya){for(var n=Se.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ya=!1}if(An=0,Ue=Le=Se=null,vs=!1,Ms=0,Qc.current=null,r===null||r.return===null){De=1,$s=e,Oe=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Be,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=bh(o);if(v!==null){v.flags&=-257,jh(v,o,a,s,e),v.mode&1&&kh(s,u,e),e=v,l=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){kh(s,u,e),Zc();break e}l=Error(N(426))}}else if(_e&&a.mode&1){var k=bh(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),jh(k,o,a,s,e),Nc(Ai(l,a));break e}}s=l=Ai(l,a),De!==4&&(De=2),ws===null?ws=[s]:ws.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Hm(s,l,e);yh(s,m);break e;case 1:a=l;var p=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Jr===null||!Jr.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Wm(s,a,e);yh(s,E);break e}}s=s.return}while(s!==null)}dg(r)}catch(P){e=P,Oe===r&&r!==null&&(Oe=r=r.return);continue}break}while(!0)}function ug(){var t=_a.current;return _a.current=wa,t===null?wa:t}function Zc(){(De===0||De===3||De===2)&&(De=4),ze===null||!(On&268435455)&&!(Ba&268435455)||Or(ze,Be)}function Ea(t,e){var r=oe;oe|=2;var n=ug();(ze!==t||Be!==e)&&(lr=null,Pn(t,e));do try{sw();break}catch(i){lg(t,i)}while(!0);if(Lc(),oe=r,_a.current=n,Oe!==null)throw Error(N(261));return ze=null,Be=0,De}function sw(){for(;Oe!==null;)cg(Oe)}function ow(){for(;Oe!==null&&!Ay();)cg(Oe)}function cg(t){var e=fg(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?dg(t):Oe=e,Qc.current=null}function dg(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Z0(r,e),r!==null){r.flags&=32767,Oe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Oe=null;return}}else if(r=X0(r,e,gt),r!==null){Oe=r;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);De===0&&(De=5)}function hn(t,e,r){var n=ce,i=Tt.transition;try{Tt.transition=null,ce=1,aw(t,e,r,n)}finally{Tt.transition=i,ce=n}return null}function aw(t,e,r,n){do vi();while(Br!==null);if(oe&6)throw Error(N(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Fy(t,s),t===ze&&(Oe=ze=null,Be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ao||(Ao=!0,pg(ia,function(){return vi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Tt.transition,Tt.transition=null;var o=ce;ce=1;var a=oe;oe|=4,Qc.current=null,tw(t,r),sg(r,t),P0(gu),oa=!!mu,gu=mu=null,t.current=r,rw(r),Oy(),oe=a,ce=o,Tt.transition=s}else t.current=r;if(Ao&&(Ao=!1,Br=t,Sa=i),s=t.pendingLanes,s===0&&(Jr=null),Ly(r.stateNode),pt(t,Ce()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(xa)throw xa=!1,t=Du,Du=null,t;return Sa&1&&t.tag!==0&&vi(),s=t.pendingLanes,s&1?t===Mu?_s++:(_s=0,Mu=t):_s=0,rn(),null}function vi(){if(Br!==null){var t=Hp(Sa),e=Tt.transition,r=ce;try{if(Tt.transition=null,ce=16>t?16:t,Br===null)var n=!1;else{if(t=Br,Br=null,Sa=0,oe&6)throw Error(N(331));var i=oe;for(oe|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(U=u;U!==null;){var c=U;switch(c.tag){case 0:case 11:case 15:ys(8,c,s)}var h=c.child;if(h!==null)h.return=c,U=h;else for(;U!==null;){c=U;var f=c.sibling,v=c.return;if(rg(c),c===u){U=null;break}if(f!==null){f.return=v,U=f;break}U=v}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ys(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,U=m;break e}U=s.return}}var p=t.current;for(U=p;U!==null;){o=U;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,U=g;else e:for(o=p;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fa(9,a)}}catch(P){Te(a,a.return,P)}if(a===o){U=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,U=E;break e}U=a.return}}if(oe=i,rn(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Na,t)}catch{}n=!0}return n}finally{ce=r,Tt.transition=e}}return!1}function zh(t,e,r){e=Ai(r,e),e=Hm(t,e,1),t=Qr(t,e,1),e=rt(),t!==null&&(eo(t,1,e),pt(t,e))}function Te(t,e,r){if(t.tag===3)zh(t,t,r);else for(;e!==null;){if(e.tag===3){zh(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jr===null||!Jr.has(n))){t=Ai(r,t),t=Wm(e,t,1),e=Qr(e,t,1),t=rt(),e!==null&&(eo(e,1,t),pt(e,t));break}}e=e.return}}function lw(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&r,ze===t&&(Be&r)===r&&(De===4||De===3&&(Be&130023424)===Be&&500>Ce()-Gc?Pn(t,0):Jc|=r),pt(t,e)}function hg(t,e){e===0&&(t.mode&1?(e=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):e=1);var r=rt();t=yr(t,e),t!==null&&(eo(t,e,r),pt(t,r))}function uw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hg(t,r)}function cw(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(e),hg(t,r)}var fg;fg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)dt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return dt=!1,Y0(t,e,r);dt=!!(t.flags&131072)}else dt=!1,_e&&e.flags&1048576&&vm(e,fa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Jo(t,e),t=e.pendingProps;var i=Pi(e,Qe.current);gi(e,r),i=Vc(null,e,n,t,i,r);var s=qc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(n)?(s=!0,da(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uc(e),i.updater=$a,e.stateNode=i,i._reactInternals=e,bu(e,n,t,r),e=Tu(null,e,n,!0,s,r)):(e.tag=0,_e&&s&&Ac(e),et(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Jo(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=hw(n),t=Lt(n,t),i){case 0:e=Pu(null,e,n,t,r);break e;case 1:e=Ch(null,e,n,t,r);break e;case 11:e=Ph(null,e,n,t,r);break e;case 14:e=Th(null,e,n,Lt(n.type,t),r);break e}throw Error(N(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),Pu(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),Ch(t,e,n,i,r);case 3:e:{if(Gm(e),t===null)throw Error(N(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Em(t,e),ga(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ai(Error(N(423)),e),e=Rh(t,e,n,r,i);break e}else if(n!==i){i=Ai(Error(N(424)),e),e=Rh(t,e,n,r,i);break e}else for(yt=Kr(e.stateNode.containerInfo.firstChild),wt=e,_e=!0,Bt=null,r=xm(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ti(),n===i){e=wr(t,e,r);break e}et(t,e,n,r)}e=e.child}return e;case 5:return km(e),t===null&&Su(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vu(n,i)?o=null:s!==null&&vu(n,s)&&(e.flags|=32),Jm(t,e),et(t,e,o,r),e.child;case 6:return t===null&&Su(e),null;case 13:return Ym(t,e,r);case 4:return zc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ci(e,null,n,r):et(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),Ph(t,e,n,i,r);case 7:return et(t,e,e.pendingProps,r),e.child;case 8:return et(t,e,e.pendingProps.children,r),e.child;case 12:return et(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ge(pa,n._currentValue),n._currentValue=o,s!==null)if(Ht(s.value,o)){if(s.children===i.children&&!ht.current){e=wr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=pr(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Eu(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(N(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Eu(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}et(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,gi(e,r),i=Rt(i),n=n(i),e.flags|=1,et(t,e,n,r),e.child;case 14:return n=e.type,i=Lt(n,e.pendingProps),i=Lt(n.type,i),Th(t,e,n,i,r);case 15:return Km(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),Jo(t,e),e.tag=1,ft(n)?(t=!0,da(e)):t=!1,gi(e,r),qm(e,n,i),bu(e,n,i,r),Tu(null,e,n,!0,t,r);case 19:return Xm(t,e,r);case 22:return Qm(t,e,r)}throw Error(N(156,e.tag))};function pg(t,e){return Fp(t,e)}function dw(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,r,n){return new dw(t,e,r,n)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hw(t){if(typeof t=="function")return ed(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wc)return 11;if(t===_c)return 14}return 2}function Yr(t,e){var r=t.alternate;return r===null?(r=Pt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Xo(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")ed(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ti:return Tn(r.children,i,s,e);case yc:o=8,i|=8;break;case Jl:return t=Pt(12,r,e,i|2),t.elementType=Jl,t.lanes=s,t;case Gl:return t=Pt(13,r,e,i),t.elementType=Gl,t.lanes=s,t;case Yl:return t=Pt(19,r,e,i),t.elementType=Yl,t.lanes=s,t;case kp:return Va(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sp:o=10;break e;case Ep:o=9;break e;case wc:o=11;break e;case _c:o=14;break e;case Cr:o=16,n=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=Pt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Tn(t,e,r,n){return t=Pt(7,t,n,e),t.lanes=r,t}function Va(t,e,r,n){return t=Pt(22,t,n,e),t.elementType=kp,t.lanes=r,t.stateNode={isHidden:!1},t}function Ol(t,e,r){return t=Pt(6,t,null,e),t.lanes=r,t}function Nl(t,e,r){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fw(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function td(t,e,r,n,i,s,o,a,l){return t=new fw(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(s),t}function pw(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mg(t){if(!t)return Zr;t=t._reactInternals;e:{if(Dn(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var r=t.type;if(ft(r))return mm(t,r,e)}return e}function gg(t,e,r,n,i,s,o,a,l){return t=td(r,n,!0,t,i,s,o,a,l),t.context=mg(null),r=t.current,n=rt(),i=Gr(r),s=pr(n,i),s.callback=e??null,Qr(r,s,i),t.current.lanes=i,eo(t,i,n),pt(t,n),t}function qa(t,e,r,n){var i=e.current,s=rt(),o=Gr(i);return r=mg(r),e.context===null?e.context=r:e.pendingContext=r,e=pr(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Qr(i,e,o),t!==null&&(qt(t,i,o,s),Wo(t,i,o)),o}function ka(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $h(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function rd(t,e){$h(t,e),(t=t.alternate)&&$h(t,e)}function mw(){return null}var vg=typeof reportError=="function"?reportError:function(t){console.error(t)};function nd(t){this._internalRoot=t}Ha.prototype.render=nd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));qa(t,e,null,null)};Ha.prototype.unmount=nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nn(function(){qa(null,t,null,null)}),e[vr]=null}};function Ha(t){this._internalRoot=t}Ha.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qp();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ar.length&&e!==0&&e<Ar[r].priority;r++);Ar.splice(r,0,t),r===0&&Gp(t)}};function id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function gw(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=ka(o);s.call(u)}}var o=gg(e,n,t,0,null,!1,!1,"",Fh);return t._reactRootContainer=o,t[vr]=o.current,Os(t.nodeType===8?t.parentNode:t),Nn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=ka(l);a.call(u)}}var l=td(t,0,!1,null,null,!1,!1,"",Fh);return t._reactRootContainer=l,t[vr]=l.current,Os(t.nodeType===8?t.parentNode:t),Nn(function(){qa(e,l,r,n)}),l}function Ka(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ka(o);a.call(l)}}qa(e,o,t,i)}else o=gw(r,e,t,i,n);return ka(o)}Wp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=as(e.pendingLanes);r!==0&&(Ec(e,r|1),pt(e,Ce()),!(oe&6)&&(Oi=Ce()+500,rn()))}break;case 13:Nn(function(){var n=yr(t,1);if(n!==null){var i=rt();qt(n,t,1,i)}}),rd(t,1)}};kc=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var r=rt();qt(e,t,134217728,r)}rd(t,134217728)}};Kp=function(t){if(t.tag===13){var e=Gr(t),r=yr(t,e);if(r!==null){var n=rt();qt(r,t,e,n)}rd(t,e)}};Qp=function(){return ce};Jp=function(t,e){var r=ce;try{return ce=t,e()}finally{ce=r}};au=function(t,e,r){switch(e){case"input":if(eu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Ma(n);if(!i)throw Error(N(90));jp(n),eu(n,i)}}}break;case"textarea":Tp(t,r);break;case"select":e=r.value,e!=null&&hi(t,!!r.multiple,e,!1)}};Lp=Yc;Dp=Nn;var vw={usingClientEntryPoint:!1,Events:[ro,si,Ma,Np,Ip,Yc]},es={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yw={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zp(t),t===null?null:t.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Na=Oo.inject(yw),tr=Oo}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vw;xt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(e))throw Error(N(200));return pw(t,e,null,r)};xt.createRoot=function(t,e){if(!id(t))throw Error(N(299));var r=!1,n="",i=vg;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=td(t,1,!1,null,null,r,!1,n,i),t[vr]=e.current,Os(t.nodeType===8?t.parentNode:t),new nd(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=zp(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Nn(t)};xt.hydrate=function(t,e,r){if(!Wa(e))throw Error(N(200));return Ka(null,t,e,!0,r)};xt.hydrateRoot=function(t,e,r){if(!id(t))throw Error(N(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=vg;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=gg(e,null,t,1,r??null,i,!1,s,o),t[vr]=e.current,Os(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Ha(e)};xt.render=function(t,e,r){if(!Wa(e))throw Error(N(200));return Ka(null,t,e,!1,r)};xt.unmountComponentAtNode=function(t){if(!Wa(t))throw Error(N(40));return t._reactRootContainer?(Nn(function(){Ka(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};xt.unstable_batchedUpdates=Yc;xt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Wa(r))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Ka(t,e,r,!1,n)};xt.version="18.3.1-next-f1338f8080-20240426";function yg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yg)}catch(t){console.error(t)}}yg(),yp.exports=xt;var sd=yp.exports;const ww=cc(sd),_w=sp({__proto__:null,default:ww},[sd]);var wg,Bh=sd;wg=Bh.createRoot,Bh.hydrateRoot;var Qa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xw={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Lr,uc,Gf,Sw=(Gf=class{constructor(){ne(this,Lr,xw);ne(this,uc,!1)}setTimeoutProvider(t){J(this,Lr,t)}setTimeout(t,e){return C(this,Lr).setTimeout(t,e)}clearTimeout(t){C(this,Lr).clearTimeout(t)}setInterval(t,e){return C(this,Lr).setInterval(t,e)}clearInterval(t){C(this,Lr).clearInterval(t)}},Lr=new WeakMap,uc=new WeakMap,Gf),$u=new Sw;function Ew(t){setTimeout(t,0)}var Ja=typeof window>"u"||"Deno"in globalThis;function Dt(){}function kw(t,e){return typeof t=="function"?t(e):t}function bw(t){return typeof t=="number"&&t>=0&&t!==1/0}function jw(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fu(t,e){return typeof t=="function"?t(e):t}function Pw(t,e){return typeof t=="function"?t(e):t}function Vh(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==od(o,e.options))return!1}else if(!Bs(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function qh(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(Fs(e.options.mutationKey)!==Fs(s))return!1}else if(!Bs(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function od(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fs)(t)}function Fs(t){return JSON.stringify(t,(e,r)=>Bu(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Bs(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Bs(t[r],e[r])):!1}var Tw=Object.prototype.hasOwnProperty;function _g(t,e){if(t===e)return t;const r=Hh(t)&&Hh(e);if(!r&&!(Bu(t)&&Bu(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),o=s.length,a=r?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=r?u:s[u],h=t[c],f=e[c];if(h===f){a[c]=h,(r?u<i:Tw.call(t,c))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[c]=f;continue}const v=_g(h,f);a[c]=v,v===h&&l++}return i===o&&l===i?t:a}function Hh(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Bu(t){if(!Wh(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Wh(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Wh(t){return Object.prototype.toString.call(t)==="[object Object]"}function Cw(t){return new Promise(e=>{$u.setTimeout(e,t)})}function Rw(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?_g(t,e):e}function Aw(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Ow(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ad=Symbol();function xg(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ad?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var xn,Dr,yi,Yf,Nw=(Yf=class extends Qa{constructor(){super();ne(this,xn);ne(this,Dr);ne(this,yi);J(this,yi,e=>{if(!Ja&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){C(this,Dr)||this.setEventListener(C(this,yi))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,Dr))==null||e.call(this),J(this,Dr,void 0))}setEventListener(e){var r;J(this,yi,e),(r=C(this,Dr))==null||r.call(this),J(this,Dr,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){C(this,xn)!==e&&(J(this,xn,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof C(this,xn)=="boolean"?C(this,xn):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xn=new WeakMap,Dr=new WeakMap,yi=new WeakMap,Yf),Sg=new Nw;function Iw(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var Lw=Ew;function Dw(){let t=[],e=0,r=a=>{a()},n=a=>{a()},i=Lw;const s=a=>{e?t.push(a):i(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var tt=Dw(),wi,Mr,_i,Xf,Mw=(Xf=class extends Qa{constructor(){super();ne(this,wi,!0);ne(this,Mr);ne(this,_i);J(this,_i,e=>{if(!Ja&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){C(this,Mr)||this.setEventListener(C(this,_i))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,Mr))==null||e.call(this),J(this,Mr,void 0))}setEventListener(e){var r;J(this,_i,e),(r=C(this,Mr))==null||r.call(this),J(this,Mr,e(this.setOnline.bind(this)))}setOnline(e){C(this,wi)!==e&&(J(this,wi,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return C(this,wi)}},wi=new WeakMap,Mr=new WeakMap,_i=new WeakMap,Xf),ba=new Mw;function Uw(t){return Math.min(1e3*2**t,3e4)}function Eg(t){return(t??"online")==="online"?ba.isOnline():!0}var Vu=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function kg(t){let e=!1,r=0,n;const i=Iw(),s=()=>i.status!=="pending",o=w=>{var k;if(!s()){const m=new Vu(w);f(m),(k=t.onCancel)==null||k.call(t,m)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>Sg.isFocused()&&(t.networkMode==="always"||ba.isOnline())&&t.canRun(),c=()=>Eg(t.networkMode)&&t.canRun(),h=w=>{s()||(n==null||n(),i.resolve(w))},f=w=>{s()||(n==null||n(),i.reject(w))},v=()=>new Promise(w=>{var k;n=m=>{(s()||u())&&w(m)},(k=t.onPause)==null||k.call(t)}).then(()=>{var w;n=void 0,s()||(w=t.onContinue)==null||w.call(t)}),y=()=>{if(s())return;let w;const k=r===0?t.initialPromise:void 0;try{w=k??t.fn()}catch(m){w=Promise.reject(m)}Promise.resolve(w).then(h).catch(m=>{var j;if(s())return;const p=t.retry??(Ja?0:3),g=t.retryDelay??Uw,E=typeof g=="function"?g(r,m):g,P=p===!0||typeof p=="number"&&r<p||typeof p=="function"&&p(r,m);if(e||!P){f(m);return}r++,(j=t.onFail)==null||j.call(t,r,m),Cw(E).then(()=>u()?void 0:v()).then(()=>{e?f(m):y()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?y():v().then(y),i)}}var Sn,Zf,bg=(Zf=class{constructor(){ne(this,Sn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bw(this.gcTime)&&J(this,Sn,$u.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ja?1/0:5*60*1e3))}clearGcTimeout(){C(this,Sn)&&($u.clearTimeout(C(this,Sn)),J(this,Sn,void 0))}},Sn=new WeakMap,Zf),En,xi,kt,kn,Me,Gs,bn,Mt,or,ep,zw=(ep=class extends bg{constructor(e){super();ne(this,Mt);ne(this,En);ne(this,xi);ne(this,kt);ne(this,kn);ne(this,Me);ne(this,Gs);ne(this,bn);J(this,bn,!1),J(this,Gs,e.defaultOptions),this.setOptions(e.options),this.observers=[],J(this,kn,e.client),J(this,kt,C(this,kn).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,J(this,En,Kh(this.options)),this.state=e.state??C(this,En),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=C(this,Me))==null?void 0:e.promise}setOptions(e){if(this.options={...C(this,Gs),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Kh(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),J(this,En,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,kt).remove(this)}setData(e,r){const n=Rw(this.state.data,e,this.options);return qe(this,Mt,or).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){qe(this,Mt,or).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=C(this,Me))==null?void 0:n.promise;return(i=C(this,Me))==null||i.cancel(e),r?r.then(Dt).catch(Dt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,En))}isActive(){return this.observers.some(e=>Pw(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ad||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!jw(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=C(this,Me))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=C(this,Me))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),C(this,kt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(C(this,Me)&&(C(this,bn)?C(this,Me).cancel({revert:!0}):C(this,Me).cancelRetry()),this.scheduleGc()),C(this,kt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qe(this,Mt,or).call(this,{type:"invalidate"})}async fetch(e,r){var l,u,c,h,f,v,y,w,k,m,p,g;if(this.state.fetchStatus!=="idle"&&((l=C(this,Me))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(C(this,Me))return C(this,Me).continueRetry(),C(this,Me).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(P=>P.options.queryFn);E&&this.setOptions(E.options)}const n=new AbortController,i=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(J(this,bn,!0),n.signal)})},s=()=>{const E=xg(this.options,r),j=(()=>{const _={client:C(this,kn),queryKey:this.queryKey,meta:this.meta};return i(_),_})();return J(this,bn,!1),this.options.persister?this.options.persister(E,j,this):E(j)},a=(()=>{const E={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:C(this,kn),state:this.state,fetchFn:s};return i(E),E})();(u=this.options.behavior)==null||u.onFetch(a,this),J(this,xi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&qe(this,Mt,or).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),J(this,Me,kg({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:E=>{E instanceof Vu&&E.revert&&this.setState({...C(this,xi),fetchStatus:"idle"}),n.abort()},onFail:(E,P)=>{qe(this,Mt,or).call(this,{type:"failed",failureCount:E,error:P})},onPause:()=>{qe(this,Mt,or).call(this,{type:"pause"})},onContinue:()=>{qe(this,Mt,or).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const E=await C(this,Me).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(v=(f=C(this,kt).config).onSuccess)==null||v.call(f,E,this),(w=(y=C(this,kt).config).onSettled)==null||w.call(y,E,this.state.error,this),E}catch(E){if(E instanceof Vu){if(E.silent)return C(this,Me).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw qe(this,Mt,or).call(this,{type:"error",error:E}),(m=(k=C(this,kt).config).onError)==null||m.call(k,E,this),(g=(p=C(this,kt).config).onSettled)==null||g.call(p,this.state.data,E,this),E}finally{this.scheduleGc()}}},En=new WeakMap,xi=new WeakMap,kt=new WeakMap,kn=new WeakMap,Me=new WeakMap,Gs=new WeakMap,bn=new WeakMap,Mt=new WeakSet,or=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...$w(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return J(this,xi,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),tt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),C(this,kt).notify({query:this,type:"updated",action:e})})},ep);function $w(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Eg(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Kh(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function Qh(t){return{onFetch:(e,r)=>{var c,h,f,v,y;const n=e.options,i=(f=(h=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((v=e.state.data)==null?void 0:v.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let w=!1;const k=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},m=xg(e.options,e.fetchOptions),p=async(g,E,P)=>{if(w)return Promise.reject();if(E==null&&g.pages.length)return Promise.resolve(g);const _=(()=>{const W={client:e.client,queryKey:e.queryKey,pageParam:E,direction:P?"backward":"forward",meta:e.options.meta};return k(W),W})(),R=await m(_),{maxPages:z}=e.options,A=P?Ow:Aw;return{pages:A(g.pages,R,z),pageParams:A(g.pageParams,E,z)}};if(i&&s.length){const g=i==="backward",E=g?Fw:Jh,P={pages:s,pageParams:o},j=E(n,P);a=await p(P,j,g)}else{const g=t??s.length;do{const E=l===0?o[0]??n.initialPageParam:Jh(n,a);if(l>0&&E==null)break;a=await p(a,E),l++}while(l<g)}return a};e.options.persister?e.fetchFn=()=>{var w,k;return(k=(w=e.options).persister)==null?void 0:k.call(w,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Jh(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Fw(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Ys,Yt,Ze,jn,Xt,jr,tp,Bw=(tp=class extends bg{constructor(e){super();ne(this,Xt);ne(this,Ys);ne(this,Yt);ne(this,Ze);ne(this,jn);J(this,Ys,e.client),this.mutationId=e.mutationId,J(this,Ze,e.mutationCache),J(this,Yt,[]),this.state=e.state||Vw(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){C(this,Yt).includes(e)||(C(this,Yt).push(e),this.clearGcTimeout(),C(this,Ze).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){J(this,Yt,C(this,Yt).filter(r=>r!==e)),this.scheduleGc(),C(this,Ze).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){C(this,Yt).length||(this.state.status==="pending"?this.scheduleGc():C(this,Ze).remove(this))}continue(){var e;return((e=C(this,jn))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,c,h,f,v,y,w,k,m,p,g,E,P,j,_,R,z;const r=()=>{qe(this,Xt,jr).call(this,{type:"continue"})},n={client:C(this,Ys),meta:this.options.meta,mutationKey:this.options.mutationKey};J(this,jn,kg({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(A,W)=>{qe(this,Xt,jr).call(this,{type:"failed",failureCount:A,error:W})},onPause:()=>{qe(this,Xt,jr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,Ze).canRun(this)}));const i=this.state.status==="pending",s=!C(this,jn).canStart();try{if(i)r();else{qe(this,Xt,jr).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=C(this,Ze).config).onMutate)==null?void 0:a.call(o,e,this,n));const W=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,n));W!==this.state.context&&qe(this,Xt,jr).call(this,{type:"pending",context:W,variables:e,isPaused:s})}const A=await C(this,jn).start();return await((h=(c=C(this,Ze).config).onSuccess)==null?void 0:h.call(c,A,e,this.state.context,this,n)),await((v=(f=this.options).onSuccess)==null?void 0:v.call(f,A,e,this.state.context,n)),await((w=(y=C(this,Ze).config).onSettled)==null?void 0:w.call(y,A,null,this.state.variables,this.state.context,this,n)),await((m=(k=this.options).onSettled)==null?void 0:m.call(k,A,null,e,this.state.context,n)),qe(this,Xt,jr).call(this,{type:"success",data:A}),A}catch(A){try{throw await((g=(p=C(this,Ze).config).onError)==null?void 0:g.call(p,A,e,this.state.context,this,n)),await((P=(E=this.options).onError)==null?void 0:P.call(E,A,e,this.state.context,n)),await((_=(j=C(this,Ze).config).onSettled)==null?void 0:_.call(j,void 0,A,this.state.variables,this.state.context,this,n)),await((z=(R=this.options).onSettled)==null?void 0:z.call(R,void 0,A,e,this.state.context,n)),A}finally{qe(this,Xt,jr).call(this,{type:"error",error:A})}}finally{C(this,Ze).runNext(this)}}},Ys=new WeakMap,Yt=new WeakMap,Ze=new WeakMap,jn=new WeakMap,Xt=new WeakSet,jr=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),tt.batch(()=>{C(this,Yt).forEach(n=>{n.onMutationUpdate(e)}),C(this,Ze).notify({mutation:this,type:"updated",action:e})})},tp);function Vw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var dr,Ut,Xs,rp,qw=(rp=class extends Qa{constructor(e={}){super();ne(this,dr);ne(this,Ut);ne(this,Xs);this.config=e,J(this,dr,new Set),J(this,Ut,new Map),J(this,Xs,0)}build(e,r,n){const i=new Bw({client:e,mutationCache:this,mutationId:++mo(this,Xs)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){C(this,dr).add(e);const r=No(e);if(typeof r=="string"){const n=C(this,Ut).get(r);n?n.push(e):C(this,Ut).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,dr).delete(e)){const r=No(e);if(typeof r=="string"){const n=C(this,Ut).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&C(this,Ut).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=No(e);if(typeof r=="string"){const n=C(this,Ut).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=No(e);if(typeof r=="string"){const i=(n=C(this,Ut).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tt.batch(()=>{C(this,dr).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,dr).clear(),C(this,Ut).clear()})}getAll(){return Array.from(C(this,dr))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>qh(r,n))}findAll(e={}){return this.getAll().filter(r=>qh(e,r))}notify(e){tt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return tt.batch(()=>Promise.all(e.map(r=>r.continue().catch(Dt))))}},dr=new WeakMap,Ut=new WeakMap,Xs=new WeakMap,rp);function No(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Zt,np,Hw=(np=class extends Qa{constructor(e={}){super();ne(this,Zt);this.config=e,J(this,Zt,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??od(i,r);let o=this.get(s);return o||(o=new zw({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){C(this,Zt).has(e.queryHash)||(C(this,Zt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=C(this,Zt).get(e.queryHash);r&&(e.destroy(),r===e&&C(this,Zt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,Zt).get(e)}getAll(){return[...C(this,Zt).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Vh(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Vh(e,n)):r}notify(e){tt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){tt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zt=new WeakMap,np),Pe,Ur,zr,Si,Ei,$r,ki,bi,ip,Ww=(ip=class{constructor(t={}){ne(this,Pe);ne(this,Ur);ne(this,zr);ne(this,Si);ne(this,Ei);ne(this,$r);ne(this,ki);ne(this,bi);J(this,Pe,t.queryCache||new Hw),J(this,Ur,t.mutationCache||new qw),J(this,zr,t.defaultOptions||{}),J(this,Si,new Map),J(this,Ei,new Map),J(this,$r,0)}mount(){mo(this,$r)._++,C(this,$r)===1&&(J(this,ki,Sg.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,Pe).onFocus())})),J(this,bi,ba.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,Pe).onOnline())})))}unmount(){var t,e;mo(this,$r)._--,C(this,$r)===0&&((t=C(this,ki))==null||t.call(this),J(this,ki,void 0),(e=C(this,bi))==null||e.call(this),J(this,bi,void 0))}isFetching(t){return C(this,Pe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return C(this,Ur).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=C(this,Pe).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=C(this,Pe).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Fu(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return C(this,Pe).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=C(this,Pe).get(n.queryHash),s=i==null?void 0:i.state.data,o=kw(e,s);if(o!==void 0)return C(this,Pe).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return tt.batch(()=>C(this,Pe).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=C(this,Pe).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=C(this,Pe);tt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=C(this,Pe);return tt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=tt.batch(()=>C(this,Pe).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Dt).catch(Dt)}invalidateQueries(t,e={}){return tt.batch(()=>(C(this,Pe).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=tt.batch(()=>C(this,Pe).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Dt)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Dt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=C(this,Pe).build(this,e);return r.isStaleByTime(Fu(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Dt).catch(Dt)}fetchInfiniteQuery(t){return t.behavior=Qh(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Dt).catch(Dt)}ensureInfiniteQueryData(t){return t.behavior=Qh(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ba.isOnline()?C(this,Ur).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,Pe)}getMutationCache(){return C(this,Ur)}getDefaultOptions(){return C(this,zr)}setDefaultOptions(t){J(this,zr,t)}setQueryDefaults(t,e){C(this,Si).set(Fs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...C(this,Si).values()],r={};return e.forEach(n=>{Bs(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){C(this,Ei).set(Fs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...C(this,Ei).values()],r={};return e.forEach(n=>{Bs(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...C(this,zr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=od(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ad&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...C(this,zr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){C(this,Pe).clear(),C(this,Ur).clear()}},Pe=new WeakMap,Ur=new WeakMap,zr=new WeakMap,Si=new WeakMap,Ei=new WeakMap,$r=new WeakMap,ki=new WeakMap,bi=new WeakMap,ip),Kw=x.createContext(void 0),Qw=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(Kw.Provider,{value:t,children:e}));const Jw={defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0,retry:1,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:1}}};function Gw(){return new Ww(Jw)}const Yw="modulepreload",Xw=function(t){return"/"+t},Gh={},L=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=Xw(l),l in Gh)return;Gh[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Yw,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Zw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>L(async()=>{const{default:n}=await Promise.resolve().then(()=>zi);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class ld extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class e_ extends ld{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yh extends ld{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xh extends ld{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(qu||(qu={}));var t_=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class r_{constructor(e,{headers:r={},customFetch:n,region:i=qu.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=Zw(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return t_(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=r;let a={},{region:l}=r;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(w=>{throw new e_(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Yh(h);if(!h.ok)throw new Xh(h);let v=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield h.json():v==="application/octet-stream"?y=yield h.blob():v==="text/event-stream"?y=h:v==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof Xh||i instanceof Yh?i.context:void 0}}})}}var ct={},ud={},Ga={},io={},Ya={},Xa={},n_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ni=n_();const i_=Ni.fetch,jg=Ni.fetch.bind(Ni),Pg=Ni.Headers,s_=Ni.Request,o_=Ni.Response,zi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pg,Request:s_,Response:o_,default:jg,fetch:i_},Symbol.toStringTag,{value:"Module"})),a_=Wv(zi);var Za={};Object.defineProperty(Za,"__esModule",{value:!0});let l_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Za.default=l_;var Tg=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xa,"__esModule",{value:!0});const u_=Tg(a_),c_=Tg(Za);let d_=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=u_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l,u;let c=null,h=null,f=null,v=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const p=await s.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const k=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");k&&m&&m.length>1&&(f=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,v=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const k=await s.text();try{c=JSON.parse(k),Array.isArray(c)&&s.status===404&&(h=[],c=null,v=200,y="OK")}catch{s.status===404&&k===""?(v=204,y="No Content"):c={message:k}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,v=200,y="OK"),c&&this.shouldThrowOnError)throw new c_.default(c)}return{error:c,data:h,count:f,status:v,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};Xa.default=d_;var h_=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ya,"__esModule",{value:!0});const f_=h_(Xa);let p_=class extends f_.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ya.default=p_;var m_=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(io,"__esModule",{value:!0});const g_=m_(Ya);let v_=class extends g_.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};io.default=v_;var y_=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ga,"__esModule",{value:!0});const ts=y_(io);let w_=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new ts.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var i;const s="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ts.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new ts.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new ts.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ts.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ga.default=w_;var Cg=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ud,"__esModule",{value:!0});const __=Cg(Ga),x_=Cg(io);let S_=class Rg{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new __.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Rg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;n||i?(a=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=r);const c=new Headers(this.headers);return s&&c.set("Prefer",`count=${s}`),new x_.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ud.default=S_;var $i=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const Ag=$i(ud);ct.PostgrestClient=Ag.default;const Og=$i(Ga);ct.PostgrestQueryBuilder=Og.default;const Ng=$i(io);ct.PostgrestFilterBuilder=Ng.default;const Ig=$i(Ya);ct.PostgrestTransformBuilder=Ig.default;const Lg=$i(Xa);ct.PostgrestBuilder=Lg.default;const Dg=$i(Za);ct.PostgrestError=Dg.default;var E_=ct.default={PostgrestClient:Ag.default,PostgrestQueryBuilder:Og.default,PostgrestFilterBuilder:Ng.default,PostgrestTransformBuilder:Ig.default,PostgrestBuilder:Lg.default,PostgrestError:Dg.default};const{PostgrestClient:k_,PostgrestQueryBuilder:Gb,PostgrestFilterBuilder:Yb,PostgrestTransformBuilder:Xb,PostgrestBuilder:Zb,PostgrestError:ej}=E_;class b_{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const j_="2.15.5",P_=`realtime-js/${j_}`,T_="1.0.0",Hu=1e4,C_=1e3,R_=100;var xs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xs||(xs={}));var Ne;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ne||(Ne={}));var $t;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($t||($t={}));var Wu;(function(t){t.websocket="websocket"})(Wu||(Wu={}));var pn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(pn||(pn={}));class A_{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Mg{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(me||(me={}));const Zh=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=O_(o,t,e,i),s),{})},O_=(t,e,r,n)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=r[t];return s&&!n.includes(s)?Ug(s,o):Ku(o)},Ug=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return D_(e,r)}switch(t){case me.bool:return N_(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return I_(e);case me.json:case me.jsonb:return L_(e);case me.timestamp:return M_(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Ku(e);default:return Ku(e)}},Ku=t=>t,N_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},L_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},D_=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Ug(e,a))}return t},M_=t=>typeof t=="string"?t.replace(" ","T"):t,zg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Il{constructor(e,r,n={},i=Hu){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ef;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ef||(ef={}));class Ss{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ss.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ss.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ss.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const f=c.map(k=>k.presence_ref),v=h.map(k=>k.presence_ref),y=c.filter(k=>v.indexOf(k.presence_ref)<0),w=h.filter(k=>f.indexOf(k.presence_ref)<0);y.length>0&&(a[u]=y),w.length>0&&(l[u]=w)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(v=>v.presence_ref),f=c.filter(v=>h.indexOf(v.presence_ref)<0);e[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(tf||(tf={}));var Es;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Es||(Es={}));var ur;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ur||(ur={}));class cd{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Il(this,$t.join,this.params,this.timeout),this.rejoinTimer=new Mg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ne.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ss(this),this.broadcastEndpointURL=zg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ne.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Es.PRESENCE]&&this.bindings[Es.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(ur.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(ur.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var y;if(this.socket.setAuth(),v===void 0){e==null||e(ur.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,m=[];for(let p=0;p<k;p++){const g=w[p],{filter:{event:E,schema:P,table:j,filter:_}}=g,R=v&&v[p];if(R&&R.event===E&&R.schema===P&&R.table===j&&R.filter===_)m.push(Object.assign(Object.assign({},g),{id:R.id}));else{this.unsubscribe(),this.state=Ne.errored,e==null||e(ur.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(ur.SUBSCRIBED);return}}).receive("error",v=>{this.state=Ne.errored,e==null||e(ur.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ur.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ne.joined&&e===Es.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ne.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Il(this,$t.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ne.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Il(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>R_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=$t;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var y,w,k;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((k=(w=v.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(v=>{var y,w,k,m,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const E=v.id,P=(y=v.filter)===null||y===void 0?void 0:y.event;return E&&((w=r.ids)===null||w===void 0?void 0:w.includes(E))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const E=(p=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return E==="*"||E===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:w,table:k,commit_timestamp:m,type:p,errors:g}=y;f=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:m,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(y))}v.callback(f,n)})}_isClosed(){return this.state===Ne.closed}_isJoined(){return this.state===Ne.joined}_isJoining(){return this.state===Ne.joining}_isLeaving(){return this.state===Ne.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&cd.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($t.close,{},e)}_onError(e){this._on($t.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ne.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Zh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Zh(e.columns,e.old_record)),r}}const Ll=()=>{},Io={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},U_=[1e3,2e3,5e3,1e4],z_=1e4,$_=`
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:T_}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xs.connecting:return pn.Connecting;case xs.open:return pn.Open;case xs.closing:return pn.Closing;default:return pn.Closed}}isConnected(){return this.connectionState()===pn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new cd(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(C_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Io.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($t.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([$_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:P_};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push($t.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Mg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Io.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,a,l,u,c;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Hu,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Io.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Ll,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>U_[h-1]||z_,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class dd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class B_ extends dd{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qu extends dd{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var V_=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const $g=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>L(async()=>{const{default:n}=await Promise.resolve().then(()=>zi);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},q_=()=>V_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield L(()=>Promise.resolve().then(()=>zi),void 0)).Response:Response}),Ju=t=>{if(Array.isArray(t))return t.map(r=>Ju(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Ju(n)}),e},H_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Mn=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Dl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),W_=(t,e,r)=>Mn(void 0,void 0,void 0,function*(){const n=yield q_();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new B_(Dl(i),s,o))}).catch(i=>{e(new Qu(Dl(i),i))}):e(new Qu(Dl(t),t))}),K_=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(H_(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function so(t,e,r,n,i,s){return Mn(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,K_(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>W_(l,a,n))})})}function ja(t,e,r,n){return Mn(this,void 0,void 0,function*(){return so(t,"GET",e,r,n)})}function Gt(t,e,r,n,i){return Mn(this,void 0,void 0,function*(){return so(t,"POST",e,n,i,r)})}function Gu(t,e,r,n,i){return Mn(this,void 0,void 0,function*(){return so(t,"PUT",e,n,i,r)})}function Q_(t,e,r,n){return Mn(this,void 0,void 0,function*(){return so(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Fg(t,e,r,n,i){return Mn(this,void 0,void 0,function*(){return so(t,"DELETE",e,n,i,r)})}var Xe=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const J_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class G_{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=$g(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return Xe(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},rf),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),h=yield(e=="PUT"?Gu:Gt)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}upload(e,r,n){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Xe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:rf.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield Gu(this.fetch,a.toString(),l,{headers:c});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return Xe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Gt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new dd("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}update(e,r,n){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Xe(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Xe(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Xe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Gt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Xe(this,void 0,void 0,function*(){try{const i=yield Gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}download(e,r){return Xe(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ja(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ie(a))return{data:null,error:a};throw a}})}info(e){return Xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ja(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ju(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}exists(e){return Xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Q_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n)&&n instanceof Qu){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Fg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}list(e,r,n){return Xe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},J_),r),{prefix:e||""});return{data:yield Gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}listV2(e,r){return Xe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Gt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Y_="2.12.1",X_={"X-Client-Info":`storage-js/${Y_}`};var Hn=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class Z_{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},X_),r),this.fetch=$g(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Hn(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ie(e))return{data:null,error:e};throw e}})}getBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Hn(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Hn(this,void 0,void 0,function*(){try{return{data:yield Gu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield Fg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}}class e1 extends Z_{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new G_(this.url,this.headers,e,this.fetch)}}const t1="2.57.4";let us="";typeof Deno<"u"?us="deno":typeof document<"u"?us="web":typeof navigator<"u"&&navigator.product==="ReactNative"?us="react-native":us="node";const r1={"X-Client-Info":`supabase-js-${us}/${t1}`},n1={headers:r1},i1={schema:"public"},s1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},o1={};var a1=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const l1=t=>{let e;return t?e=t:typeof fetch>"u"?e=jg:e=fetch,(...r)=>e(...r)},u1=()=>typeof Headers>"u"?Pg:Headers,c1=(t,e,r)=>{const n=l1(r),i=u1();return(s,o)=>a1(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var d1=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};function h1(t){return t.endsWith("/")?t:t+"/"}function f1(t,e){var r,n;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>d1(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function p1(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(h1(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Bg="2.71.1",Xn=30*1e3,Yu=3,Ml=Yu*Xn,m1="http://localhost:9999",g1="supabase.auth.token",v1={"X-Client-Info":`gotrue-js/${Bg}`},Xu="X-Supabase-Api-Version",Vg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},y1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,w1=10*60*1e3;class hd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Y(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class _1 extends hd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function x1(t){return Y(t)&&t.name==="AuthApiError"}class qg extends hd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class nn extends hd{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Pr extends nn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function S1(t){return Y(t)&&t.name==="AuthSessionMissingError"}class Lo extends nn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Do extends nn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mo extends nn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function E1(t){return Y(t)&&t.name==="AuthImplicitGrantRedirectError"}class nf extends nn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zu extends nn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ul(t){return Y(t)&&t.name==="AuthRetryableFetchError"}class sf extends nn{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ec extends nn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),of=` 	
\r=`.split(""),k1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<of.length;e+=1)t[of[e].charCodeAt(0)]=-2;for(let e=0;e<Pa.length;e+=1)t[Pa[e].charCodeAt(0)]=e;return t})();function af(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Pa[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Pa[n]),e.queuedBits-=6}}function Hg(t,e,r){const n=k1[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function lf(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{P1(o,n,r)};for(let o=0;o<t.length;o+=1)Hg(t.charCodeAt(o),i,s);return e.join("")}function b1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function j1(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}b1(n,e)}}function P1(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function T1(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Hg(t.charCodeAt(i),r,n);return new Uint8Array(e)}function C1(t){const e=[];return j1(t,r=>e.push(r)),new Uint8Array(e)}function R1(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>af(i,r,n)),af(null,r,n),e.join("")}function A1(t){return Math.round(Date.now()/1e3)+t}function O1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",un={tested:!1,writable:!1},Wg=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(un.tested)return un.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),un.tested=!0,un.writable=!0}catch{un.tested=!0,un.writable=!1}return un.writable};function N1(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const Kg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>L(async()=>{const{default:n}=await Promise.resolve().then(()=>zi);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},I1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},cn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},br=async(t,e)=>{await t.removeItem(e)};let Qg=class Jg{constructor(){this.promise=new Jg.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}};Qg.promiseConstructor=Promise;function zl(t){const e=t.split(".");if(e.length!==3)throw new ec("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!y1.test(e[n]))throw new ec("JWT not in base64url format");return{header:JSON.parse(lf(e[0])),payload:JSON.parse(lf(e[1])),signature:T1(e[2]),raw:{header:e[0],payload:e[1]}}}async function L1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function D1(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function M1(t){return("0"+t.toString(16)).substr(-2)}function U1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,M1).join("")}async function z1(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function $1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await z1(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wn(t,e,r=!1){const n=U1();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Zn(t,`${e}-code-verifier`,i);const s=await $1(n);return[s,n===s?"plain":"s256"]}const F1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function B1(t){const e=t.headers.get(Xu);if(!e||!e.match(F1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function V1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function q1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const H1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kn(t){if(!H1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $l(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uf(t){return JSON.parse(JSON.stringify(t))}var W1=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const fn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),K1=[502,503,504];async function cf(t){var e;if(!I1(t))throw new Zu(fn(t),0);if(K1.includes(t.status))throw new Zu(fn(t),t.status);let r;try{r=await t.json()}catch(s){throw new qg(fn(s),s)}let n;const i=B1(t);if(i&&i.getTime()>=Vg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new sf(fn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new sf(fn(r),t.status,r.weak_password.reasons);throw new _1(fn(r),t.status||500,n)}const Q1=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ee(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[Xu]||(s[Xu]=Vg["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await J1(t,e,r+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function J1(t,e,r,n,i,s){const o=Q1(e,n,i,s);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new Zu(fn(l),0)}if(a.ok||await cf(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await cf(l)}}function ar(t){var e;let r=null;Z1(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=A1(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function df(t){const e=ar(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Nr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function G1(t){return{data:t,error:null}}function Y1(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=W1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function X1(t){return t}function Z1(t){return t.access_token&&t.refresh_token&&t.expires_in}const Fl=["global","local","others"];var ex=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class tx{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Kg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Fl[0]){if(Fl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fl.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nr})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ex(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Y1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Y(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Nr})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:X1});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(y.split(";")[1].split("=")[1]);u[`${k}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Y(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Kn(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Nr})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Kn(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Nr})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Kn(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nr})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Kn(e.userId);try{const{data:r,error:n}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Kn(e.userId),Kn(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}}function hf(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function rx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qn={debug:!!(globalThis&&Wg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nx extends Gg{}async function ix(t,e,r){Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new nx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qn.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}rx();const sx={url:m1,storageKey:g1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:v1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ff(t,e,r){return await r()}const Jn={};class Vs{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vs.nextInstanceID,Vs.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},sx),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new tx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Kg(i.fetch),this.lock=i.lock||ff,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:It()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ix:this.lock=ff,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Wg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=hf(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Jn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Jn[this.storageKey]=Object.assign(Object.assign({},Jn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Jn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Jn[this.storageKey]=Object.assign(Object.assign({},Jn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=N1(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),It()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),E1(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Y(r)?{error:r}:{error:new qg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ar}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:c,password:h,options:f}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Wn(this.storage,this.storageKey)),s=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:y},xform:ar})}else if("phone"in e){const{phone:c,password:h,options:f}=e;s=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ar})}else throw new Do("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:a}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:df})}else if("phone"in e){const{phone:s,password:o,options:a}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:df})}else throw new Do("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Lo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,s,o,a,l,u,c,h,f,v;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:k,wallet:m,statement:p,options:g}=e;let E;if(It())if(typeof m=="object")E=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))E=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=m}const P=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const j=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),p?{statement:p}:null));let _;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")_=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)_=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)y=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),w=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${P.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=g==null?void 0:g.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(c=g==null?void 0:g.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const j=await E.signMessage(new TextEncoder().encode(y),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=j}}try{const{data:k,error:m}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:R1(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ar});if(m)throw m;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Lo}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:m})}catch(k){if(Y(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const r=await cn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ar});if(await br(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Lo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Y(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,a=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ar}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Lo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Wn(this.storage,this.storageKey));const{error:h}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Do("You must provide either an email or phone number.")}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ar});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Wn(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:G1})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pr;const{error:i}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Do("You must provide either an email or phone number and a type")}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ml:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await cn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=$l()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Nr}):await this._useSession(async r=>{var n,i,s;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pr}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Nr})})}catch(r){if(Y(r))return S1(r)&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Pr;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Wn(this.storage,this.storageKey));const{data:u,error:c}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Nr});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pr;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=zl(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(Y(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pr;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!It())throw new Mo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new nf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new nf("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Mo("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const v=f-c;v*1e3<=Xn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const y=f-h;c-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,c):c-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,c);const{data:w,error:k}=await this._getUser(s);if(k)throw k;const m={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Y(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await cn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(x1(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=O1(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Wn(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:f}=s;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",v,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return It()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Y(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await D1(async i=>(i>0&&await L1(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ar})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Ul(s)&&Date.now()+o-n<Xn})}catch(n){if(this._debug(r,"error",n),Y(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),It()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await cn(this.storage,this.storageKey);if(i&&this.userStorage){let o=await cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Zn(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:$l()}else if(i&&!i.user&&!i.user){const o=await cn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await br(this.storage,this.storageKey+"-user"),await Zn(this.storage,this.storageKey,i)):i.user=$l()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ml;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Ml}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Ul(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Qg;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Pr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Y(s)){const o={session:null,error:s};return Ul(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Zn(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=uf(i);await Zn(this.storage,this.storageKey,s)}else{const i=uf(r);await Zn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await br(this.storage,this.storageKey),await br(this.storage,this.storageKey+"-code-verifier"),await br(this.storage,this.storageKey+"-user"),this.userStorage&&await br(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Xn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Xn}ms, refresh threshold is ${Yu} ticks`),i<=Yu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Gg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Wn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=zl(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+w1>i)return n;const{data:s,error:o}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};n=v.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=zl(n);r!=null&&r.allowExpired||V1(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:s,header:i,signature:o},error:null}}const c=q1(i.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,C1(`${a}.${l}`)))throw new ec("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}}Vs.nextInstanceID=0;const ox=Vs;class ax extends ox{constructor(e){super(e)}}var lx=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class ux{constructor(e,r,n){var i,s,o;this.supabaseUrl=e,this.supabaseKey=r;const a=p1(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:i1,realtime:o1,auth:Object.assign(Object.assign({},s1),{storageKey:l}),global:n1},c=f1(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=c1(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new k_(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new e1(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new r_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return lx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ax({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:a,lock:l,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new F_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cx=(t,e,r)=>new ux(t,e,r);function dx(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}dx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hx="https://muiidvzmpcmcmrxuwtqt.supabase.co",fx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11aWlkdnptcGNtY21yeHV3dHF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDQzMDgsImV4cCI6MjA3OTYyMDMwOH0.WURqe9zpb_hSZyJrHOXswxEkByungk_U1fYGeqfLJag",fe=cx(hx,fx,{auth:{persistSession:!0,autoRefreshToken:!0}});async function Yg(){try{const t=new Promise((n,i)=>setTimeout(()=>i(new Error("Connection timeout after 5 seconds")),5e3)),e=fe.from("profiles").select("id").limit(1),{error:r}=await Promise.race([e,t]);return r?r.message.includes("schema cache")||r.message.includes("Could not find")?{success:!1,message:"La table des profils n'est pas accessible. Les migrations de base de donnes n'ont peut-tre pas t appliques correctement."}:{success:!1,message:r.message}:{success:!0,message:"Database connection successful"}}catch(t){return t.message.includes("timeout")?{success:!1,message:"La connexion a expir. Vrifiez votre connexion Internet."}:t.message.includes("schema cache")||t.message.includes("Could not find")?{success:!1,message:"La table des profils n'est pas accessible. Les migrations de base de donnes n'ont peut-tre pas t appliques correctement."}:{success:!1,message:t.message}}}class px{constructor(){Vn(this,"isDevelopment",!1);Vn(this,"isProduction",!0)}formatMessage(e){const r=[`[${e.timestamp}]`,`[${e.level.toUpperCase()}]`,e.message];return e.context&&r.push(JSON.stringify(e.context)),r.join(" ")}createEntry(e,r,n,i){return{level:e,message:r,timestamp:new Date().toISOString(),context:n,error:i}}shouldLog(e){return this.isDevelopment?!0:this.isProduction?e==="warn"||e==="error":!1}debug(e,r){if(!this.shouldLog("debug"))return;const n=this.createEntry("debug",e,r);console.debug(this.formatMessage(n),r)}info(e,r){if(!this.shouldLog("info"))return;const n=this.createEntry("info",e,r);console.info(this.formatMessage(n),r)}warn(e,r){if(!this.shouldLog("warn"))return;const n=this.createEntry("warn",e,r);console.warn(this.formatMessage(n),r),this.isProduction&&window.Sentry&&window.Sentry.captureMessage(e,{level:"warning",extra:r})}error(e,r,n){if(!this.shouldLog("error"))return;const i=this.createEntry("error",e,n,r);console.error(this.formatMessage(i),r,n),this.isProduction&&window.Sentry&&(r?window.Sentry.captureException(r,{extra:{message:e,...n}}):window.Sentry.captureMessage(e,{level:"error",extra:n}))}group(e){this.isDevelopment&&console.group(e)}groupEnd(){this.isDevelopment&&console.groupEnd()}}const Uo=new px,Xg=x.createContext(void 0);function mx({children:t}){const[e,r]=x.useState(null),[n,i]=x.useState(null),[s,o]=x.useState(null),[a,l]=x.useState(!0),[u,c]=x.useState(null);x.useEffect(()=>{fe.auth.getSession().then(({data:{session:j}})=>{o(j),r((j==null?void 0:j.user)??null),j!=null&&j.user?h(j.user.id):l(!1)});const{data:{subscription:P}}=fe.auth.onAuthStateChange((j,_)=>{(async()=>(o(_),r((_==null?void 0:_.user)??null),_!=null&&_.user?await h(_.user.id):(i(null),l(!1))))()});return()=>P.unsubscribe()},[]);const h=async(P,j=0)=>{try{if(Uo.debug("Loading user profile",{userId:P,attempt:j+1,maxRetries:6}),j===0){const W=await Yg();if(!W.success){Uo.error("Database connection failed",void 0,{message:W.message}),c({type:"network",message:"Problme de connexion  la base de donnes",details:W.message}),l(!1);return}}const{data:z,error:A}=await fe.from("profiles").select("*").eq("id",P).maybeSingle();if(A){if(Uo.error("Error loading profile from Supabase",A,{userId:P}),A.message.includes("schema cache")||A.message.includes("Could not find the table")){Uo.error("Schema cache error - profiles table not accessible",void 0,{userId:P}),c({type:"database",message:"Connexion  la base de donnes impossible",details:`Could not find the table 'public.profiles' in the schema cache
 PRIORIT ABSOLUE : La scurit de l'utilisateur passe AVANT tout !`},...r.slice(-10).map(u=>({role:u.role,content:u.content})),{role:"user",content:e}],a=await fetch("https://muiidvzmpcmcmrxuwtqt.supabase.co/functions/v1/ai-chatbot",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11aWlkdnptcGNtY21yeHV3dHF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDQzMDgsImV4cCI6MjA3OTYyMDMwOH0.WURqe9zpb_hSZyJrHOXswxEkByungk_U1fYGeqfLJag"},body:JSON.stringify({messages:s,userId:n,temperature:.8,maxTokens:1e3})});if(!a.ok){const u=await a.json().catch(()=>({}));throw console.error("Edge function error:",u),new Error(u.error||"Failed to get AI response")}const l=await a.json();return console.log(" AI Response received successfully from edge function"),l.content}catch(i){return console.error(" Error getting AI response:",i),console.log(" Using intelligent fallback system"),this.getFallbackResponse(e)}}getFallbackResponse(e){const r=e.toLowerCase();return this.detectScam(r)?this.getScamWarningResponse(r):r.includes("recherche")||r.includes("proprit")?` **Pour rechercher une proprit SCURISE** :
Comment puis-je vous aider aujourd'hui ? `,created_at:new Date().toISOString()};n([ke]),h(!0)}else h(!1)}},j=async M=>{var st;const ie=M||i.trim();if(!ie||!l||!p)return;s(""),a(!0),h(!1);const ke=await sr.sendMessage(l.id,ie,"user");ke&&n(ot=>[...ot,ke]);try{const ot=await sr.getAIResponse(ie,r,p.id),at=await sr.sendMessage(l.id,ot,"assistant");at&&n(I=>[...I,at])}catch(ot){console.error("Error getting AI response:",ot);const at=await sr.sendMessage(l.id," Dsol, je rencontre des difficults techniques. Veuillez ressayer dans quelques instants ou contacter le support  support@montoit.ci","assistant");at&&n(I=>[...I,at])}a(!1),(st=m.current)==null||st.focus()},_=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),j())},R=M=>{j(M.message)},z=M=>{j(M)},A=async()=>{!p||!l||(await sr.archiveConversation(l.id),u(null),n([]),h(!0),await P(),await E())},W=async M=>{u(M);const ie=await sr.getConversationMessages(M.id);n(ie),v(!1),h(!1)};return p?d.jsxs(d.Fragment,{children:[!t&&d.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-gradient-to-r from-terracotta-500 to-coral-500 text-white rounded-full p-4 shadow-2xl hover:shadow-glow transition-all duration-300 hover:scale-110 z-50 group","aria-label":"Ouvrir le chat",children:[d.jsx(_v,{className:"h-7 w-7 group-hover:animate-bounce"}),d.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 w-4 h-4 rounded-full animate-pulse border-2 border-white"})]}),t&&d.jsxs("div",{className:"fixed bottom-6 right-6 w-[420px] h-[650px] bg-white rounded-3xl shadow-2xl flex flex-col z-50 border border-gray-200 animate-scale-in overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-terracotta-500 via-coral-500 to-terracotta-600 text-white p-4 flex items-center justify-between relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-50"}),d.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[d.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2.5 rounded-full ring-2 ring-white/30",children:d.jsx(sc,{className:"h-6 w-6"})}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:["SUTA",d.jsx(kE,{className:"h-4 w-4 animate-pulse"})]}),d.jsxs("p",{className:"text-xs text-white/90 flex items-center gap-1",children:[d.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Assistant Protecteur  Toujours disponible"]})]})]}),d.jsxs("div",{className:"flex items-center gap-1 relative z-10",children:[d.jsxs("button",{onClick:()=>v(!f),className:"p-2 hover:bg-white/20 rounded-lg transition-colors relative",title:"Historique",children:[d.jsx(iE,{className:"h-5 w-5"}),y.length>1&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-400 text-terracotta-800 text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center",children:y.length})]}),d.jsx("button",{onClick:A,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Nouvelle conversation",children:d.jsx(bE,{className:"h-5 w-5"})}),d.jsx("button",{onClick:()=>e(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Fermer le chat",children:d.jsx(_d,{className:"h-5 w-5"})})]})]}),f&&d.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 p-3 max-h-48 overflow-y-auto",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Conversations rcentes"}),d.jsx("div",{className:"space-y-2",children:y.map(M=>d.jsxs("button",{onClick:()=>W(M),className:`w-full text-left p-2 rounded-lg transition-colors ${M.id===(l==null?void 0:l.id)?"bg-terracotta-100 border border-terracotta-300":"bg-white hover:bg-gray-100 border border-gray-200"}`,children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.title}),d.jsx("div",{className:"text-xs text-gray-500",children:new Date(M.updated_at).toLocaleDateString("fr-FR")})]},M.id))})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-gray-50 to-white",children:[r.map((M,ie)=>d.jsx(RE,{role:M.role,content:M.content,timestamp:M.created_at,isNew:ie===r.length-1},M.id)),o&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:d.jsx(sc,{className:"h-5 w-5 text-white"})}),d.jsx("div",{className:"bg-white rounded-2xl rounded-tl-none px-4 py-3 border-2 border-gray-200 shadow-sm",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(hE,{className:"h-4 w-4 animate-spin text-terracotta-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"SUTA analyse votre demande..."})]})})]}),c&&r.length<=1&&d.jsxs("div",{className:"animate-fade-in",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:" Actions rapides"}),d.jsx("p",{className:"text-xs text-gray-500",children:"Choisissez une option ou posez votre question"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:OE.map((M,ie)=>d.jsxs("button",{onClick:()=>R(M),className:"flex flex-col items-center gap-2 p-3 bg-white rounded-xl border-2 border-gray-200 hover:border-terracotta-400 hover:shadow-md transition-all group",children:[d.jsx("div",{className:`bg-gradient-to-br ${M.color} p-2 rounded-lg group-hover:scale-110 transition-transform`,children:d.jsx(M.icon,{className:"h-5 w-5 text-white"})}),d.jsx("span",{className:"text-xs font-medium text-gray-700 text-center leading-tight",children:M.label})]},ie))}),d.jsxs("div",{className:"mt-4",children:[d.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2",children:" Suggestions"}),d.jsx("div",{className:"space-y-2",children:NE.map((M,ie)=>d.jsx("button",{onClick:()=>z(M),className:"w-full text-left p-2 px-3 bg-white rounded-lg border border-gray-200 hover:border-terracotta-400 hover:bg-terracotta-50 transition-all text-xs text-gray-700",children:M},ie))})]})]}),d.jsx("div",{ref:k})]}),d.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white",children:[d.jsxs("div",{className:"flex items-end gap-2",children:[d.jsx("textarea",{ref:m,value:i,onChange:M=>s(M.target.value),onKeyPress:_,placeholder:"Posez votre question  SUTA...",className:"flex-1 resize-none border-2 border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-terracotta-400 focus:border-terracotta-400 max-h-24 text-sm transition-all",rows:1,disabled:o}),d.jsx("button",{onClick:()=>j(),disabled:!i.trim()||o,className:"bg-gradient-to-r from-terracotta-500 to-coral-500 text-white p-3 rounded-xl hover:shadow-lg hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100","aria-label":"Envoyer le message",children:d.jsx(xv,{className:"h-5 w-5"})})]}),d.jsxs("div",{className:"flex items-center justify-between mt-2",children:[d.jsx("p",{className:"text-xs text-gray-400",children:" Assistance scurise 24/7 par IA"}),d.jsx("p",{className:"text-xs text-gray-400",children:"Aliment par Azure AI"})]})]})]})]}):null}function IE(){const{user:t}=fd(),[e,r]=x.useState(0);return x.useEffect(()=>{if(!t)return;const i=async()=>{try{const{count:o,error:a}=await fe.from("messages").select("*",{count:"exact",head:!0}).eq("receiver_id",t.id).eq("is_read",!1);if(a)throw a;r(o||0)}catch(o){console.error("Error fetching unread count:",o)}};i();const s=fe.channel("message_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${t.id}`},()=>{i(),"Notification"in window&&Notification.permission==="granted"&&new Notification("Nouveau message",{body:"Vous avez reu un nouveau message",icon:"/favicon.ico"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`receiver_id=eq.${t.id}`},()=>{i()}).subscribe();return()=>{s.unsubscribe()}},[t]),{unreadCount:e,requestNotificationPermission:async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()}}}function LE(){const[t,e]=x.useState(()=>{const r=typeof window<"u"?window.innerWidth:1024;return{width:r,isMobile:r<768,isTablet:r>=768&&r<1024,isDesktop:r>=1024,current:r<768?"mobile":r<1024?"tablet":"desktop"}});return x.useEffect(()=>{const r=()=>{const n=window.innerWidth;e({width:n,isMobile:n<768,isTablet:n>=768&&n<1024,isDesktop:n>=1024,current:n<768?"mobile":n<1024?"tablet":"desktop"})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}function DE(){var l;const{theme:t,actualTheme:e,setTheme:r}=vx(),[n,i]=x.useState(!1),s=[{value:"light",label:"Clair",icon:Uf},{value:"dark",label:"Sombre",icon:vE},{value:"system",label:"Systme",icon:gE}],a=((l=s.find(u=>u.value===t))==null?void 0:l.icon)||Uf;return d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>i(!n),onBlur:()=>setTimeout(()=>i(!1),200),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Changer le thme",children:d.jsx(a,{className:`h-5 w-5 ${e==="dark"?"text-yellow-400":"text-gray-700"}`})}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2 z-50 animate-scale-in",children:s.map(u=>{const c=u.icon,h=t===u.value;return d.jsxs("button",{onClick:()=>{r(u.value),i(!1)},className:`w-full flex items-center space-x-3 px-4 py-2 text-sm transition-colors ${h?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[d.jsx(c,{className:"h-4 w-4"}),d.jsx("span",{children:u.label}),h&&d.jsx("span",{className:"ml-auto text-blue-600 dark:text-blue-400",children:""})]},u.value)})})]})}function ME(){const{user:t,profile:e,signOut:r}=fd(),{unreadCount:n}=IE(),{isMobile:i}=LE(),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[u,c]=x.useState(!1),h=(e==null?void 0:e.user_type)==="proprietaire"||(e==null?void 0:e.active_role)==="proprietaire";x.useEffect(()=>{const y=()=>{c(window.scrollY>20)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const f=[{label:"Rechercher",href:"/recherche",icon:SE},...t&&h?[{label:"Publier",href:"/ajouter-propriete",icon:wE}]:[],...t?[{label:"Messages",href:"/messages",icon:_v,badge:n}]:[]],v=t?[{label:"Mon Profil",href:"/profil",icon:ds},{label:"Mes Favoris",href:"/favoris",icon:aE},{label:"Mes Visites",href:"/mes-visites",icon:vv},{label:"Mes Alertes",href:"/recherches-sauvegardees",icon:rE},{label:"Mes Contrats",href:"/mes-contrats",icon:wv},{label:"Paramtres",href:"/profil",icon:EE}]:[];return d.jsxs(d.Fragment,{children:[d.jsx("header",{className:`header-premium ${u?"scrolled":""}`,children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[d.jsxs("a",{href:"/",className:"header-logo header-logo-animated flex items-center space-x-2 md:space-x-3 flex-shrink-0",children:[d.jsx("div",{className:"relative",children:d.jsx("img",{src:"/logo-montoit.png",alt:"Mon Toit",className:"h-10 w-10 md:h-12 md:w-12 object-contain"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-lg md:text-xl font-bold gradient-text-orange",children:"Mon Toit"}),!i&&d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Plateforme Immobilire"})]})]}),d.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[d.jsxs("a",{href:"/",className:"header-nav-link header-nav-link-animated flex items-center space-x-2",style:{animationDelay:"0.1s"},children:[d.jsx(Ks,{className:"h-5 w-5"}),d.jsx("span",{children:"Accueil"})]}),f.map((y,w)=>d.jsxs("a",{href:y.href,className:"header-nav-link header-nav-link-animated flex items-center space-x-2 relative",style:{animationDelay:`${.2+w*.1}s`},children:[d.jsx(y.icon,{className:"h-5 w-5 header-btn-icon"}),d.jsx("span",{children:y.label}),y.badge&&y.badge>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:y.badge>9?"9+":y.badge})]},y.label)),d.jsx("div",{className:"ml-2",children:d.jsx(DE,{})}),t?d.jsxs("div",{className:"relative ml-2",children:[d.jsxs("button",{onClick:()=>l(!a),onBlur:()=>setTimeout(()=>l(!1),200),className:"header-btn-primary flex items-center space-x-2",children:[d.jsx(ds,{className:"h-5 w-5 header-btn-icon"}),d.jsx("span",{children:"Mon Compte"})]}),a&&d.jsxs("div",{className:"absolute right-0 mt-2 w-56 glass rounded-xl shadow-premium border border-gray-200 dark:border-gray-700 py-2 z-50 animate-fade-in",children:[d.jsxs("div",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:(e==null?void 0:e.full_name)||"Utilisateur"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),v.map(y=>d.jsxs("a",{href:y.href,className:"flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-orange-50 dark:hover:bg-orange-900/20 hover:text-orange-600 dark:hover:text-orange-400 transition-all duration-200",children:[d.jsx(y.icon,{className:"h-4 w-4"}),d.jsx("span",{children:y.label})]},y.label)),d.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 mt-2 pt-2",children:d.jsxs("button",{onClick:r,className:"flex items-center space-x-3 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-200 w-full",children:[d.jsx(Mf,{className:"h-4 w-4"}),d.jsx("span",{children:"Dconnexion"})]})})]})]}):d.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[d.jsxs("a",{href:"/connexion",className:"header-btn-secondary flex items-center space-x-2",children:[d.jsx(ds,{className:"h-5 w-5 header-btn-icon"}),d.jsx("span",{children:"Connexion"})]}),d.jsx("a",{href:"/inscription",className:"header-btn-primary flex items-center space-x-2",children:d.jsx("span",{children:"Inscription"})})]})]}),d.jsx("button",{onClick:()=>o(!s),className:"md:hidden p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all",children:s?d.jsx(_d,{className:"h-6 w-6"}):d.jsx(mE,{className:"h-6 w-6"})})]})})}),d.jsx("div",{className:`header-mobile-backdrop ${s?"open":""}`,onClick:()=>o(!1)}),d.jsx("div",{className:`header-mobile-menu ${s?"open":""}`,children:d.jsxs("div",{className:"p-6 space-y-4",children:[t&&d.jsxs("div",{className:"header-mobile-item pb-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:(e==null?void 0:e.full_name)||"Utilisateur"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("a",{href:"/",className:"header-mobile-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-orange-50 dark:hover:bg-orange-900/20 hover:text-orange-600 dark:hover:text-orange-400 transition-all",children:[d.jsx(Ks,{className:"h-5 w-5"}),d.jsx("span",{className:"font-semibold",children:"Accueil"})]}),f.map(y=>d.jsxs("a",{href:y.href,className:"header-mobile-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-orange-50 dark:hover:bg-orange-900/20 hover:text-orange-600 dark:hover:text-orange-400 transition-all relative",children:[d.jsx(y.icon,{className:"h-5 w-5"}),d.jsx("span",{className:"font-semibold",children:y.label}),y.badge&&y.badge>0&&d.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:y.badge>9?"9+":y.badge})]},y.label)),t&&v.map(y=>d.jsxs("a",{href:y.href,className:"header-mobile-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-orange-50 dark:hover:bg-orange-900/20 hover:text-orange-600 dark:hover:text-orange-400 transition-all",children:[d.jsx(y.icon,{className:"h-5 w-5"}),d.jsx("span",{className:"font-semibold",children:y.label})]},y.label))]}),d.jsx("div",{className:"header-mobile-item pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:t?d.jsxs("button",{onClick:r,className:"flex items-center justify-center space-x-2 w-full px-4 py-3 rounded-xl text-red-600 dark:text-red-400 border-2 border-red-600 dark:border-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all font-semibold",children:[d.jsx(Mf,{className:"h-5 w-5"}),d.jsx("span",{children:"Dconnexion"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("a",{href:"/connexion",className:"flex items-center justify-center space-x-2 w-full px-4 py-3 rounded-xl text-orange-600 dark:text-orange-400 border-2 border-orange-600 dark:border-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-all font-semibold",children:[d.jsx(ds,{className:"h-5 w-5"}),d.jsx("span",{children:"Connexion"})]}),d.jsx("a",{href:"/inscription",className:"flex items-center justify-center w-full px-4 py-3 rounded-xl gradient-orange text-white hover:shadow-orange-hover transition-all font-semibold",children:d.jsx("span",{children:"Inscription"})})]})})]})})]})}function UE(){const[t,e]=x.useState(""),[r,n]=x.useState(!1),i=a=>{a.preventDefault(),n(!0),e(""),setTimeout(()=>n(!1),3e3)},s=Array.from({length:15},(a,l)=>({id:l,left:`${Math.random()*100}%`,delay:`${Math.random()*20}s`,duration:`${20+Math.random()*10}s`})),o=Array.from({length:5},(a,l)=>({id:l,left:`${20+l*15}%`,delay:`${l*.8}s`}));return d.jsxs("footer",{className:"footer-premium",children:[d.jsx("div",{className:"footer-wave"}),d.jsx("div",{className:"footer-particles",children:s.map(a=>d.jsx("div",{className:"footer-particle",style:{left:a.left,animationDelay:a.delay,animationDuration:a.duration}},a.id))}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative z-10",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-10 mb-12",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6 group",children:[d.jsx("img",{src:"/logo-montoit.png",alt:"Mon Toit Logo",className:"h-12 w-12 object-contain group-hover:scale-110 transition-all duration-300"}),d.jsx("span",{className:"text-2xl font-bold text-white",children:"MON TOIT"})]}),d.jsx("p",{className:"text-sm text-gray-400 leading-relaxed mb-6",children:"Plateforme immobilire certifie pour un accs universel au logement en Cte d'Ivoire."}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("a",{href:"#",className:"footer-social-icon","aria-label":"Facebook",children:d.jsx(oE,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"footer-social-icon","aria-label":"Twitter",children:d.jsx(jE,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"footer-social-icon","aria-label":"Instagram",children:d.jsx(cE,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"footer-social-icon","aria-label":"LinkedIn",children:d.jsx(dE,{className:"h-5 w-5"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"footer-section-title",children:"Liens rapides"}),d.jsxs("ul",{className:"space-y-3 text-sm",children:[d.jsx("li",{children:d.jsx("a",{href:"/",className:"footer-link",children:"Accueil"})}),d.jsx("li",{children:d.jsx("a",{href:"/recherche",className:"footer-link",children:"Rechercher"})}),d.jsx("li",{children:d.jsx("a",{href:"/a-propos",className:"footer-link",children:" propos"})}),d.jsx("li",{children:d.jsx("a",{href:"/comment-ca-marche",className:"footer-link",children:"Comment a marche"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",className:"footer-link",children:"Contact"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"footer-section-title",children:"Lgal"}),d.jsxs("ul",{className:"space-y-3 text-sm",children:[d.jsx("li",{children:d.jsx("a",{href:"/conditions-utilisation",className:"footer-link",children:"Conditions d'utilisation"})}),d.jsx("li",{children:d.jsx("a",{href:"/politique-confidentialite",className:"footer-link",children:"Politique de confidentialit"})}),d.jsx("li",{children:d.jsx("a",{href:"/mentions-legales",className:"footer-link",children:"Mentions lgales"})}),d.jsx("li",{children:d.jsx("a",{href:"/cgv",className:"footer-link",children:"CGV"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"footer-section-title",children:"Newsletter"}),d.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Recevez nos dernires offres et actualits"}),d.jsxs("form",{onSubmit:i,className:"space-y-3",children:[d.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),placeholder:"votre@email.com",required:!0,className:"footer-newsletter-input w-full"}),d.jsxs("button",{type:"submit",className:`footer-newsletter-btn w-full flex items-center justify-center space-x-2 ${r?"footer-newsletter-success":""}`,children:[d.jsx(xv,{className:"h-4 w-4"}),d.jsx("span",{children:r?"Inscrit !":"S'inscrire"})]})]}),d.jsxs("div",{className:"mt-6 space-y-2 text-sm text-gray-400",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(yE,{className:"h-4 w-4 text-orange-400"}),d.jsx("span",{children:"+225 XX XX XX XX XX"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(fE,{className:"h-4 w-4 text-orange-400"}),d.jsx("span",{children:"contact@montoit.ci"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(pE,{className:"h-4 w-4 text-orange-400"}),d.jsx("span",{children:"Abidjan, Cte d'Ivoire"})]})]})]})]}),d.jsx("div",{className:"footer-separator mb-8"}),d.jsxs("div",{className:"footer-copyright",children:[d.jsx("div",{className:"footer-copyright-particles",children:o.map(a=>d.jsx("div",{className:"footer-copyright-particle",style:{left:a.left,animationDelay:a.delay}},a.id))}),d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 relative z-10",children:[d.jsxs("p",{className:"footer-copyright-text text-sm",children:[" ",new Date().getFullYear()," Mon Toit. Tous droits rservs."]}),d.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[d.jsx("a",{href:"/aide",className:"footer-link",children:"Aide"}),d.jsx("a",{href:"/faq",className:"footer-link",children:"FAQ"}),d.jsx("a",{href:"/blog",className:"footer-link",children:"Blog"})]})]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-white/5 backdrop-blur-sm rounded-full border border-white/10",children:[d.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),d.jsx("span",{className:"text-xs text-gray-400",children:"Certifi ANSUT"})]})})]})]})]})}class oc extends x.Component{constructor(r){super(r);Vn(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});Vn(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n),this.setState({error:r,errorInfo:n}),console.error("Error details:",{message:r.message,stack:r.stack,componentStack:n.componentStack})}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-terracotta-50 via-coral-50 to-amber-50 flex items-center justify-center p-4",children:d.jsx("div",{className:"max-w-2xl w-full",children:d.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 border-4 border-terracotta-100",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-red-100 rounded-full mb-4",children:d.jsx(gv,{className:"w-10 h-10 text-red-600"})}),d.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:"Oups ! Une erreur est survenue"}),d.jsx("p",{className:"text-lg text-gray-600",children:"Nous sommes dsols, quelque chose s'est mal pass."})]}),!1,d.jsxs("div",{className:"space-y-4",children:[d.jsxs("button",{onClick:this.handleReset,className:"w-full btn-primary py-4 text-lg font-bold flex items-center justify-center space-x-2",children:[d.jsx(xE,{className:"w-5 h-5"}),d.jsx("span",{children:"Ressayer"})]}),d.jsxs("button",{onClick:this.handleGoHome,className:"w-full px-6 py-4 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-2xl transition-all transform hover:scale-105 flex items-center justify-center space-x-2",children:[d.jsx(Ks,{className:"w-5 h-5"}),d.jsx("span",{children:"Retour  l'accueil"})]})]}),d.jsx("div",{className:"mt-8 p-4 bg-olive-50 border-2 border-olive-200 rounded-xl",children:d.jsx("p",{className:"text-sm text-olive-800 text-center",children:"Si le problme persiste, veuillez contacter notre support technique."})})]})})}):this.props.children}}let zE=0;const Qs=new Set;let Ir=[];function ac(t,e){t.forEach(r=>r([...e]))}function Wt(t,e){const r=`toast-${++zE}`,n={id:r,type:(e==null?void 0:e.type)||"info",message:t,description:e==null?void 0:e.description,duration:(e==null?void 0:e.duration)||5e3};return Ir.push(n),ac(Qs,Ir),n.duration&&setTimeout(()=>{Ir=Ir.filter(i=>i.id!==r),ac(Qs,Ir)},n.duration),r}Wt.success=(t,e)=>Wt(t,{...e,type:"success"});Wt.error=(t,e)=>Wt(t,{...e,type:"error"});Wt.info=(t,e)=>Wt(t,{...e,type:"info"});Wt.warning=(t,e)=>Wt(t,{...e,type:"warning"});Wt.dismiss=t=>{Ir=Ir.filter(e=>e.id!==t),ac(Qs,Ir)};function $E(){const[t,e]=x.useState([]);return x.useEffect(()=>{const r=n=>{e(n)};return Qs.add(r),()=>{Qs.delete(r)}},[]),{toasts:t,toast:Wt,dismiss:Wt.dismiss}}function FE(){const{toasts:t,dismiss:e}=$E(),r={success:d.jsx(yv,{className:"h-5 w-5 text-green-600"}),error:d.jsx(PE,{className:"h-5 w-5 text-red-600"}),info:d.jsx(uE,{className:"h-5 w-5 text-blue-600"}),warning:d.jsx(gv,{className:"h-5 w-5 text-yellow-600"})},n={success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200",warning:"bg-yellow-50 border-yellow-200"};return t.length===0?null:d.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2 max-w-md",children:t.map(i=>d.jsxs("div",{className:`${n[i.type]} border-2 rounded-xl p-4 shadow-lg animate-slide-up flex items-start gap-3 min-w-[320px]`,children:[d.jsx("div",{className:"flex-shrink-0",children:r[i.type]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:i.message}),i.description&&d.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.description})]}),d.jsx("button",{onClick:()=>e(i.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(_d,{className:"h-5 w-5"})})]},i.id))})}const $f=["/connexion","/inscription","/messages","/auth/callback"],BE=["/messages","/admin/tableau-de-bord","/admin/utilisateurs","/admin/service-monitoring","/admin/service-configuration","/admin/test-data-generator","/admin/demo-rapide","/admin/gestion-roles","/admin/cev-management","/visiter","/mes-visites","/creer-contrat","/contrat","/signer-bail","/bail/signer","/verification","/certification-ansut","/mes-certificats","/admin/api-keys","/admin/service-providers"];function VE(){const e=Bi().pathname,r=!$f.includes(e),n=!BE.some(i=>e.startsWith(i))&&!$f.includes(e);return r?d.jsxs(oc,{children:[n&&d.jsx(ME,{}),d.jsx(FE,{}),d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-terracotta-500"})}),children:d.jsx("main",{className:n?"min-h-screen":"",children:d.jsx(Af,{})})}),n&&d.jsx(UE,{}),d.jsx(zf,{})]}):d.jsx(oc,{children:d.jsxs(x.Suspense,{fallback:d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-terracotta-500"})}),children:[d.jsx(Af,{}),d.jsx(zf,{})]})})}const qE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11aWlkdnptcGNtY21yeHV3dHF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDQzMDgsImV4cCI6MjA3OTYyMDMwOH0.WURqe9zpb_hSZyJrHOXswxEkByungk_U1fYGeqfLJag",VITE_SUPABASE_URL:"https://muiidvzmpcmcmrxuwtqt.supabase.co"},Ff=t=>{let e;const r=new Set,n=(c,h)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const v=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),r.forEach(y=>y(e,v))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{(qE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,i,l);return l},HE=t=>t?Ff(t):Ff;var Sv={exports:{}},Ev={},kv={exports:{}},bv={};/**
 */var rl=x,rk=tk;function nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ik=typeof Object.is=="function"?Object.is:nk,sk=rk.useSyncExternalStore,ok=rl.useRef,ak=rl.useEffect,lk=rl.useMemo,uk=rl.useDebugValue;Ev.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=ok(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=lk(function(){function l(v){if(!u){if(u=!0,c=v,v=n(v),i!==void 0&&o.hasValue){var y=o.value;if(i(y,v))return h=y}return h=v}if(y=h,ik(c,v))return y;var w=n(v);return i!==void 0&&i(y,w)?(c=v,y):(c=v,h=w)}var u=!1,c,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,i]);var a=sk(t,s[0],s[1]);return ak(function(){o.hasValue=!0,o.value=a},[a]),uk(a),a};Sv.exports=Ev;var ck=Sv.exports;const dk=cc(ck),jv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11aWlkdnptcGNtY21yeHV3dHF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDQzMDgsImV4cCI6MjA3OTYyMDMwOH0.WURqe9zpb_hSZyJrHOXswxEkByungk_U1fYGeqfLJag",VITE_SUPABASE_URL:"https://muiidvzmpcmcmrxuwtqt.supabase.co"},{useDebugValue:hk}=gp,{useSyncExternalStoreWithSelector:fk}=dk;let Bf=!1;const pk=t=>t;function mk(t,e=pk,r){(jv?"production":void 0)!=="production"&&r&&!Bf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Bf=!0);const n=fk(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return hk(n),n}const gk=t=>{(jv?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?HE(t):t,r=(n,i)=>mk(e,n,i);return Object.assign(r,e),r},vk=t=>gk,ea={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11aWlkdnptcGNtY21yeHV3dHF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNDQzMDgsImV4cCI6MjA3OTYyMDMwOH0.WURqe9zpb_hSZyJrHOXswxEkByungk_U1fYGeqfLJag",VITE_SUPABASE_URL:"https://muiidvzmpcmcmrxuwtqt.supabase.co"},lc=new Map,$o=t=>{const e=lc.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([r,n])=>[r,n.getState()])):{}},yk=(t,e,r)=>{if(t===void 0)return{type:"untracked",connection:e.connect(r)};const n=lc.get(r.name);if(n)return{type:"tracked",store:t,...n};const i={connection:e.connect(r),stores:{}};return lc.set(r.name,i),{type:"tracked",store:t,...i}},wk=(t,e={})=>(r,n,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=e;let u;try{u=(s??(ea?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(ea?"production":void 0)!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(r,n,i);const{connection:c,...h}=yk(a,u,l);let f=!0;i.setState=(w,k,m)=>{const p=r(w,k);if(!f)return p;const g=m===void 0?{type:o||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(c==null||c.send(g,n()),p):(c==null||c.send({...g,type:`${a}/${g.type}`},{...$o(l.name),[a]:i.getState()}),p)};const v=(...w)=>{const k=f;f=!1,r(...w),f=k},y=t(i.setState,n,i);if(h.type==="untracked"?c==null||c.init(y):(h.stores[h.store]=i,c==null||c.init(Object.fromEntries(Object.entries(h.stores).map(([w,k])=>[w,w===h.store?y:k.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let w=!1;const k=i.dispatch;i.dispatch=(...m)=>{(ea?"production":void 0)!=="production"&&m[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),k(...m)}}return c.subscribe(w=>{var k;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Wl(w.payload,m=>{if(m.type==="__setState"){if(a===void 0){v(m.state);return}Object.keys(m.state).length!==1&&console.error(`
